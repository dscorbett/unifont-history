\hypertarget{unifontpic_8c}{}\doxysection{src/unifontpic.c File Reference}
\label{unifontpic_8c}\index{src/unifontpic.c@{src/unifontpic.c}}


unifontpic -\/ See the \char`\"{}\+Big Picture\char`\"{}\+: the entire Unifont in one BMP bitmap  


{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include \char`\"{}unifontpic.\+h\char`\"{}}\newline
Include dependency graph for unifontpic.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=345pt]{unifontpic_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{unifontpic_8c_af314b4eee945c2791f7890f72f0623af}{HDR\+\_\+\+LEN}}~33
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{unifontpic_8c_a3c04138a5bfe5d72780bb7e82a18e627}{main}} (int argc, char $\ast$$\ast$argv)
\begin{DoxyCompactList}\small\item\em The main function. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (int thisword)
\begin{DoxyCompactList}\small\item\em Output a 4-\/byte integer in little-\/endian order. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{unifontpic_8c_af1fbb002e4787785de92e073ec46b787}{output2}} (int thisword)
\begin{DoxyCompactList}\small\item\em Output a 2-\/byte integer in little-\/endian order. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{unifontpic_8c_a0a030f2857f0d855b7ab0ccd8e968f1f}{gethex}} (char $\ast$instring, int plane\+\_\+array\mbox{[}0x10000\mbox{]}\mbox{[}16\mbox{]}, int plane)
\begin{DoxyCompactList}\small\item\em Read a Unifont .hex-\/format input file from stdin. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{unifontpic_8c_afd429d88175c59dae5c32e8c9aa7851d}{genlongbmp}} (int plane\+\_\+array\mbox{[}0x10000\mbox{]}\mbox{[}16\mbox{]}, int dpi, int tinynum, int plane)
\begin{DoxyCompactList}\small\item\em Generate the BMP output file in long format. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{unifontpic_8c_a3931c7b44c00ffdb8925a3c837577677}{genwidebmp}} (int plane\+\_\+array\mbox{[}0x10000\mbox{]}\mbox{[}16\mbox{]}, int dpi, int tinynum, int plane)
\begin{DoxyCompactList}\small\item\em Generate the BMP output file in wide format. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
unifontpic -\/ See the \char`\"{}\+Big Picture\char`\"{}\+: the entire Unifont in one BMP bitmap 

\begin{DoxyAuthor}{Author}
Paul Hardy, 2013
\end{DoxyAuthor}
\begin{DoxyCopyright}{Copyright}
Copyright (C) 2013, 2017 Paul Hardy 
\end{DoxyCopyright}


Definition in file \mbox{\hyperlink{unifontpic_8c_source}{unifontpic.\+c}}.



\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{unifontpic_8c_af314b4eee945c2791f7890f72f0623af}\label{unifontpic_8c_af314b4eee945c2791f7890f72f0623af}} 
\index{unifontpic.c@{unifontpic.c}!HDR\_LEN@{HDR\_LEN}}
\index{HDR\_LEN@{HDR\_LEN}!unifontpic.c@{unifontpic.c}}
\doxysubsubsection{\texorpdfstring{HDR\_LEN}{HDR\_LEN}}
{\footnotesize\ttfamily \#define HDR\+\_\+\+LEN~33}

Define length of header string for top of chart. 

Definition at line \mbox{\hyperlink{unifontpic_8c_source_l00067}{67}} of file \mbox{\hyperlink{unifontpic_8c_source}{unifontpic.\+c}}.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{unifontpic_8c_afd429d88175c59dae5c32e8c9aa7851d}\label{unifontpic_8c_afd429d88175c59dae5c32e8c9aa7851d}} 
\index{unifontpic.c@{unifontpic.c}!genlongbmp@{genlongbmp}}
\index{genlongbmp@{genlongbmp}!unifontpic.c@{unifontpic.c}}
\doxysubsubsection{\texorpdfstring{genlongbmp()}{genlongbmp()}}
{\footnotesize\ttfamily void genlongbmp (\begin{DoxyParamCaption}\item[{int}]{plane\+\_\+array\mbox{[}0x10000\mbox{]}\mbox{[}16\mbox{]},  }\item[{int}]{dpi,  }\item[{int}]{tinynum,  }\item[{int}]{plane }\end{DoxyParamCaption})}



Generate the BMP output file in long format. 

This function generates the BMP output file from a bitmap parameter. This is a long bitmap, 16 glyphs wide by 4,096 glyphs tall.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em plane\+\_\+array} & The array of glyph bitmaps for a plane. \\
\hline
\mbox{\texttt{ in}}  & {\em dpi} & Dots per inch, for encoding in the BMP output file header. \\
\hline
\mbox{\texttt{ in}}  & {\em tinynum} & Whether to generate tiny numbers in wide grid (unused). \\
\hline
\mbox{\texttt{ in}}  & {\em plane} & The Unicode plane, 0..17. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{unifontpic_8c_source_l00294}{294}} of file \mbox{\hyperlink{unifontpic_8c_source}{unifontpic.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00295 \{}
\DoxyCodeLine{00296 }
\DoxyCodeLine{00297    \textcolor{keywordtype}{char} header\_string[\mbox{\hyperlink{unifontpic_8c_af314b4eee945c2791f7890f72f0623af}{HDR\_LEN}}]; \textcolor{comment}{/* centered header             */}}
\DoxyCodeLine{00298    \textcolor{keywordtype}{char} raw\_header[\mbox{\hyperlink{unifontpic_8c_af314b4eee945c2791f7890f72f0623af}{HDR\_LEN}}];    \textcolor{comment}{/* left-\/aligned header         */}}
\DoxyCodeLine{00299    \textcolor{keywordtype}{int} header[16][16];     \textcolor{comment}{/* header row, for chart title */}}
\DoxyCodeLine{00300    \textcolor{keywordtype}{int} hdrlen;             \textcolor{comment}{/* length of HEADER\_STRING     */}}
\DoxyCodeLine{00301    \textcolor{keywordtype}{int} startcol;           \textcolor{comment}{/* column to start printing header, for centering */}}
\DoxyCodeLine{00302 }
\DoxyCodeLine{00303    \textcolor{keywordtype}{unsigned} leftcol[0x1000][16]; \textcolor{comment}{/* code point legend on left side of chart */}}
\DoxyCodeLine{00304    \textcolor{keywordtype}{int} d1, d2, d3, d4;           \textcolor{comment}{/* digits for filling leftcol[][] legend   */}}
\DoxyCodeLine{00305    \textcolor{keywordtype}{int} codept;                   \textcolor{comment}{/* current starting code point for legend  */}}
\DoxyCodeLine{00306    \textcolor{keywordtype}{int} thisrow;                  \textcolor{comment}{/* glyph row currently being rendered      */}}
\DoxyCodeLine{00307    \textcolor{keywordtype}{unsigned} toprow[16][16];      \textcolor{comment}{/* code point legend on top of chart       */}}
\DoxyCodeLine{00308    \textcolor{keywordtype}{int} digitrow;       \textcolor{comment}{/* row we're in (0..4) for the above hexdigit digits */}}
\DoxyCodeLine{00309 }
\DoxyCodeLine{00310    \textcolor{comment}{/*}}
\DoxyCodeLine{00311 \textcolor{comment}{      DataOffset = BMP Header bytes + InfoHeader bytes + ColorTable bytes.}}
\DoxyCodeLine{00312 \textcolor{comment}{   */}}
\DoxyCodeLine{00313    \textcolor{keywordtype}{int} DataOffset = 14 + 40 + 8; \textcolor{comment}{/* fixed size for monochrome BMP */}}
\DoxyCodeLine{00314    \textcolor{keywordtype}{int} ImageSize;}
\DoxyCodeLine{00315    \textcolor{keywordtype}{int} FileSize;}
\DoxyCodeLine{00316    \textcolor{keywordtype}{int} Width, Height; \textcolor{comment}{/* bitmap image width and height in pixels */}}
\DoxyCodeLine{00317    \textcolor{keywordtype}{int} ppm;     \textcolor{comment}{/* integer pixels per meter */}}
\DoxyCodeLine{00318 }
\DoxyCodeLine{00319    \textcolor{keywordtype}{int} i, j, k;}
\DoxyCodeLine{00320 }
\DoxyCodeLine{00321    \textcolor{keywordtype}{unsigned} bytesout;}
\DoxyCodeLine{00322 }
\DoxyCodeLine{00323    \textcolor{keywordtype}{void} \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}}(\textcolor{keywordtype}{int}), \mbox{\hyperlink{unifontpic_8c_af1fbb002e4787785de92e073ec46b787}{output2}}(\textcolor{keywordtype}{int});}
\DoxyCodeLine{00324 }
\DoxyCodeLine{00325    \textcolor{comment}{/*}}
\DoxyCodeLine{00326 \textcolor{comment}{      Image width and height, in pixels.}}
\DoxyCodeLine{00327 \textcolor{comment}{}}
\DoxyCodeLine{00328 \textcolor{comment}{         N.B.: Width must be an even multiple of 32 pixels, or 4 bytes.}}
\DoxyCodeLine{00329 \textcolor{comment}{   */}}
\DoxyCodeLine{00330    Width  =   18 * 16;  \textcolor{comment}{/* (2 legend +   16 glyphs) * 16 pixels/glyph */}}
\DoxyCodeLine{00331    Height = 4099 * 16;  \textcolor{comment}{/* (1 header + 4096 glyphs) * 16 rows/glyph   */}}
\DoxyCodeLine{00332 }
\DoxyCodeLine{00333    ImageSize = Height * (Width / 8); \textcolor{comment}{/* in bytes, calculated from pixels */}}
\DoxyCodeLine{00334 }
\DoxyCodeLine{00335    FileSize = DataOffset + ImageSize;}
\DoxyCodeLine{00336 }
\DoxyCodeLine{00337    \textcolor{comment}{/* convert dots/inch to pixels/meter */}}
\DoxyCodeLine{00338    \textcolor{keywordflow}{if} (dpi == 0) dpi = 96;}
\DoxyCodeLine{00339    ppm = (int)((\textcolor{keywordtype}{double})dpi * 100.0 / 2.54 + 0.5);}
\DoxyCodeLine{00340 }
\DoxyCodeLine{00341    \textcolor{comment}{/*}}
\DoxyCodeLine{00342 \textcolor{comment}{      Generate the BMP Header}}
\DoxyCodeLine{00343 \textcolor{comment}{   */}}
\DoxyCodeLine{00344    putchar (\textcolor{charliteral}{'B'});}
\DoxyCodeLine{00345    putchar (\textcolor{charliteral}{'M'});}
\DoxyCodeLine{00346 }
\DoxyCodeLine{00347    \textcolor{comment}{/*}}
\DoxyCodeLine{00348 \textcolor{comment}{      Calculate file size:}}
\DoxyCodeLine{00349 \textcolor{comment}{}}
\DoxyCodeLine{00350 \textcolor{comment}{         BMP Header + InfoHeader + Color Table + Raster Data}}
\DoxyCodeLine{00351 \textcolor{comment}{   */}}
\DoxyCodeLine{00352    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (FileSize);  \textcolor{comment}{/* FileSize */}}
\DoxyCodeLine{00353    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (0x0000); \textcolor{comment}{/* reserved */}}
\DoxyCodeLine{00354 }
\DoxyCodeLine{00355    \textcolor{comment}{/* Calculate DataOffset */}}
\DoxyCodeLine{00356    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (DataOffset);}
\DoxyCodeLine{00357 }
\DoxyCodeLine{00358    \textcolor{comment}{/*}}
\DoxyCodeLine{00359 \textcolor{comment}{      InfoHeader}}
\DoxyCodeLine{00360 \textcolor{comment}{   */}}
\DoxyCodeLine{00361    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (40);         \textcolor{comment}{/* Size of InfoHeader                       */}}
\DoxyCodeLine{00362    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (Width);      \textcolor{comment}{/* Width of bitmap in pixels                */}}
\DoxyCodeLine{00363    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (Height);     \textcolor{comment}{/* Height of bitmap in pixels               */}}
\DoxyCodeLine{00364    \mbox{\hyperlink{unifontpic_8c_af1fbb002e4787785de92e073ec46b787}{output2}} (1);          \textcolor{comment}{/* Planes (1 plane)                         */}}
\DoxyCodeLine{00365    \mbox{\hyperlink{unifontpic_8c_af1fbb002e4787785de92e073ec46b787}{output2}} (1);          \textcolor{comment}{/* BitCount (1 = monochrome)                */}}
\DoxyCodeLine{00366    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (0);          \textcolor{comment}{/* Compression (0 = none)                   */}}
\DoxyCodeLine{00367    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (ImageSize);  \textcolor{comment}{/* ImageSize, in bytes                      */}}
\DoxyCodeLine{00368    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (ppm);        \textcolor{comment}{/* XpixelsPerM (96 dpi = 3780 pixels/meter) */}}
\DoxyCodeLine{00369    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (ppm);        \textcolor{comment}{/* YpixelsPerM (96 dpi = 3780 pixels/meter) */}}
\DoxyCodeLine{00370    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (2);          \textcolor{comment}{/* ColorsUsed (= 2)                         */}}
\DoxyCodeLine{00371    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (2);          \textcolor{comment}{/* ColorsImportant (= 2)                    */}}
\DoxyCodeLine{00372    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (0x00000000); \textcolor{comment}{/* black (reserved, B, G, R)                */}}
\DoxyCodeLine{00373    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (0x00FFFFFF); \textcolor{comment}{/* white (reserved, B, G, R)                */}}
\DoxyCodeLine{00374 }
\DoxyCodeLine{00375    \textcolor{comment}{/*}}
\DoxyCodeLine{00376 \textcolor{comment}{      Create header row bits.}}
\DoxyCodeLine{00377 \textcolor{comment}{   */}}
\DoxyCodeLine{00378    snprintf (raw\_header, \mbox{\hyperlink{unifontpic_8c_af314b4eee945c2791f7890f72f0623af}{HDR\_LEN}}, \textcolor{stringliteral}{"{}\%s Plane \%d"{}}, \mbox{\hyperlink{unifontpic_8h_a418ed439fafbc678a74cb266ef2919d4}{HEADER\_STRING}}, plane);}
\DoxyCodeLine{00379    memset ((\textcolor{keywordtype}{void} *)header, 0, 16 * 16 * \textcolor{keyword}{sizeof} (\textcolor{keywordtype}{int})); \textcolor{comment}{/* fill with white */}}
\DoxyCodeLine{00380    memset ((\textcolor{keywordtype}{void} *)header\_string, \textcolor{charliteral}{' '}, 32 * \textcolor{keyword}{sizeof} (\textcolor{keywordtype}{char})); \textcolor{comment}{/* 32 spaces */}}
\DoxyCodeLine{00381    header\_string[32] = \textcolor{charliteral}{'\(\backslash\)0'};  \textcolor{comment}{/* null-\/terminated */}}
\DoxyCodeLine{00382 }
\DoxyCodeLine{00383    hdrlen = strlen (raw\_header);}
\DoxyCodeLine{00384    \textcolor{keywordflow}{if} (hdrlen > 32) hdrlen = 32;        \textcolor{comment}{/* only 32 columns to print header */}}
\DoxyCodeLine{00385    startcol = 16 -\/ ((hdrlen + 1) >> 1); \textcolor{comment}{/* to center header                */}}
\DoxyCodeLine{00386    \textcolor{comment}{/* center up to 32 chars */}}
\DoxyCodeLine{00387    memcpy (\&header\_string[startcol], raw\_header, hdrlen);}
\DoxyCodeLine{00388 }
\DoxyCodeLine{00389    \textcolor{comment}{/* Copy each letter's bitmap from the plane\_array[][] we constructed. */}}
\DoxyCodeLine{00390    \textcolor{comment}{/* Each glyph must be single-\/width, to fit two glyphs in 16 pixels */}}
\DoxyCodeLine{00391    \textcolor{keywordflow}{for} (j = 0; j < 16; j++) \{}
\DoxyCodeLine{00392       \textcolor{keywordflow}{for} (i = 0; i < 16; i++) \{}
\DoxyCodeLine{00393          header[i][j] =}
\DoxyCodeLine{00394             (\mbox{\hyperlink{unifontpic_8h_a593ebc374e9f30c90743f0fd48cc91df}{ascii\_bits}}[header\_string[j+j  ] \& 0x7F][i] \& 0xFF00) |}
\DoxyCodeLine{00395             (\mbox{\hyperlink{unifontpic_8h_a593ebc374e9f30c90743f0fd48cc91df}{ascii\_bits}}[header\_string[j+j+1] \& 0x7F][i] >> 8);}
\DoxyCodeLine{00396       \}}
\DoxyCodeLine{00397    \}}
\DoxyCodeLine{00398 }
\DoxyCodeLine{00399    \textcolor{comment}{/*}}
\DoxyCodeLine{00400 \textcolor{comment}{      Create the left column legend.}}
\DoxyCodeLine{00401 \textcolor{comment}{   */}}
\DoxyCodeLine{00402    memset ((\textcolor{keywordtype}{void} *)leftcol, 0, 4096 * 16 * \textcolor{keyword}{sizeof} (\textcolor{keywordtype}{unsigned}));}
\DoxyCodeLine{00403 }
\DoxyCodeLine{00404    \textcolor{keywordflow}{for} (codept = 0x0000; codept < 0x10000; codept += 0x10) \{}
\DoxyCodeLine{00405       d1 = (codept >> 12) \& 0xF; \textcolor{comment}{/* most significant hex digit */}}
\DoxyCodeLine{00406       d2 = (codept >>  8) \& 0xF;}
\DoxyCodeLine{00407       d3 = (codept >>  4) \& 0xF;}
\DoxyCodeLine{00408 }
\DoxyCodeLine{00409       thisrow = codept >> 4; \textcolor{comment}{/* rows of 16 glyphs */}}
\DoxyCodeLine{00410 }
\DoxyCodeLine{00411       \textcolor{comment}{/* fill in first and second digits */}}
\DoxyCodeLine{00412       \textcolor{keywordflow}{for} (digitrow = 0; digitrow < 5; digitrow++) \{}
\DoxyCodeLine{00413          leftcol[thisrow][2 + digitrow] =}
\DoxyCodeLine{00414             (\mbox{\hyperlink{unibmp2hex_8c_a8e50648544568f9274781c2c90acdd78}{hexdigit}}[d1][digitrow] << 10) |}
\DoxyCodeLine{00415             (\mbox{\hyperlink{unibmp2hex_8c_a8e50648544568f9274781c2c90acdd78}{hexdigit}}[d2][digitrow] <<  4);}
\DoxyCodeLine{00416       \}}
\DoxyCodeLine{00417 }
\DoxyCodeLine{00418       \textcolor{comment}{/* fill in third digit */}}
\DoxyCodeLine{00419       \textcolor{keywordflow}{for} (digitrow = 0; digitrow < 5; digitrow++) \{}
\DoxyCodeLine{00420          leftcol[thisrow][9 + digitrow] = \mbox{\hyperlink{unibmp2hex_8c_a8e50648544568f9274781c2c90acdd78}{hexdigit}}[d3][digitrow] << 10;}
\DoxyCodeLine{00421       \}}
\DoxyCodeLine{00422       leftcol[thisrow][9 + 4] |= 0xF << 4; \textcolor{comment}{/* underscore as 4th digit */}}
\DoxyCodeLine{00423 }
\DoxyCodeLine{00424       \textcolor{keywordflow}{for} (i = 0; i < 15; i ++) \{}
\DoxyCodeLine{00425          leftcol[thisrow][i] |= 0x00000002;      \textcolor{comment}{/* right border */}}
\DoxyCodeLine{00426       \}}
\DoxyCodeLine{00427 }
\DoxyCodeLine{00428       leftcol[thisrow][15] = 0x0000FFFE;        \textcolor{comment}{/* bottom border */}}
\DoxyCodeLine{00429 }
\DoxyCodeLine{00430       \textcolor{keywordflow}{if} (d3 == 0xF) \{                     \textcolor{comment}{/* 256-\/point boundary */}}
\DoxyCodeLine{00431          leftcol[thisrow][15] |= 0x00FF0000;  \textcolor{comment}{/* longer tic mark */}}
\DoxyCodeLine{00432       \}}
\DoxyCodeLine{00433 }
\DoxyCodeLine{00434       \textcolor{keywordflow}{if} ((thisrow \% 0x40) == 0x3F) \{    \textcolor{comment}{/* 1024-\/point boundary */}}
\DoxyCodeLine{00435          leftcol[thisrow][15] |= 0xFFFF0000; \textcolor{comment}{/* longest tic mark */}}
\DoxyCodeLine{00436       \}}
\DoxyCodeLine{00437    \}}
\DoxyCodeLine{00438 }
\DoxyCodeLine{00439    \textcolor{comment}{/*}}
\DoxyCodeLine{00440 \textcolor{comment}{      Create the top row legend.}}
\DoxyCodeLine{00441 \textcolor{comment}{   */}}
\DoxyCodeLine{00442    memset ((\textcolor{keywordtype}{void} *)toprow, 0, 16 * 16 * \textcolor{keyword}{sizeof} (\textcolor{keywordtype}{unsigned}));}
\DoxyCodeLine{00443 }
\DoxyCodeLine{00444    \textcolor{keywordflow}{for} (codept = 0x0; codept <= 0xF; codept++) \{}
\DoxyCodeLine{00445       d1 = (codept >> 12) \& 0xF; \textcolor{comment}{/* most significant hex digit */}}
\DoxyCodeLine{00446       d2 = (codept >>  8) \& 0xF;}
\DoxyCodeLine{00447       d3 = (codept >>  4) \& 0xF;}
\DoxyCodeLine{00448       d4 =  codept        \& 0xF; \textcolor{comment}{/* least significant hex digit */}}
\DoxyCodeLine{00449 }
\DoxyCodeLine{00450       \textcolor{comment}{/* fill in last digit */}}
\DoxyCodeLine{00451       \textcolor{keywordflow}{for} (digitrow = 0; digitrow < 5; digitrow++) \{}
\DoxyCodeLine{00452          toprow[6 + digitrow][codept] = \mbox{\hyperlink{unibmp2hex_8c_a8e50648544568f9274781c2c90acdd78}{hexdigit}}[d4][digitrow] << 6;}
\DoxyCodeLine{00453       \}}
\DoxyCodeLine{00454    \}}
\DoxyCodeLine{00455 }
\DoxyCodeLine{00456    \textcolor{keywordflow}{for} (j = 0; j < 16; j++) \{}
\DoxyCodeLine{00457       \textcolor{comment}{/* force bottom pixel row to be white, for separation from glyphs */}}
\DoxyCodeLine{00458       toprow[15][j] = 0x0000;}
\DoxyCodeLine{00459    \}}
\DoxyCodeLine{00460 }
\DoxyCodeLine{00461    \textcolor{comment}{/* 1 pixel row with left-\/hand legend line */}}
\DoxyCodeLine{00462    \textcolor{keywordflow}{for} (j = 0; j < 16; j++) \{}
\DoxyCodeLine{00463       toprow[14][j] |= 0xFFFF;}
\DoxyCodeLine{00464    \}}
\DoxyCodeLine{00465 }
\DoxyCodeLine{00466    \textcolor{comment}{/* 14 rows with line on left to fill out this character row */}}
\DoxyCodeLine{00467    \textcolor{keywordflow}{for} (i = 13; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{00468       \textcolor{keywordflow}{for} (j = 0; j < 16; j++) \{}
\DoxyCodeLine{00469          toprow[i][j] |= 0x0001;}
\DoxyCodeLine{00470       \}}
\DoxyCodeLine{00471    \}}
\DoxyCodeLine{00472 }
\DoxyCodeLine{00473    \textcolor{comment}{/*}}
\DoxyCodeLine{00474 \textcolor{comment}{      Now write the raster image.}}
\DoxyCodeLine{00475 \textcolor{comment}{}}
\DoxyCodeLine{00476 \textcolor{comment}{      XOR each byte with 0xFF because black = 0, white = 1 in BMP.}}
\DoxyCodeLine{00477 \textcolor{comment}{   */}}
\DoxyCodeLine{00478 }
\DoxyCodeLine{00479    \textcolor{comment}{/* Write the glyphs, bottom-\/up, left-\/to-\/right, in rows of 16 (i.e., 0x10) */}}
\DoxyCodeLine{00480    \textcolor{keywordflow}{for} (i = 0xFFF0; i >= 0; i -\/= 0x10) \{}
\DoxyCodeLine{00481       thisrow = i >> 4; \textcolor{comment}{/* 16 glyphs per row */}}
\DoxyCodeLine{00482       \textcolor{keywordflow}{for} (j = 15; j >= 0; j-\/-\/) \{}
\DoxyCodeLine{00483          \textcolor{comment}{/* left-\/hand legend */}}
\DoxyCodeLine{00484          putchar ((\string~leftcol[thisrow][j] >> 24) \& 0xFF);}
\DoxyCodeLine{00485          putchar ((\string~leftcol[thisrow][j] >> 16) \& 0xFF);}
\DoxyCodeLine{00486          putchar ((\string~leftcol[thisrow][j] >>  8) \& 0xFF);}
\DoxyCodeLine{00487          putchar ( \string~leftcol[thisrow][j]        \& 0xFF);}
\DoxyCodeLine{00488          \textcolor{comment}{/* Unifont glyph */}}
\DoxyCodeLine{00489          \textcolor{keywordflow}{for} (k = 0; k < 16; k++) \{}
\DoxyCodeLine{00490             bytesout = \string~plane\_array[i+k][j] \& 0xFFFF;}
\DoxyCodeLine{00491             putchar ((bytesout >> 8) \& 0xFF);}
\DoxyCodeLine{00492             putchar ( bytesout       \& 0xFF);}
\DoxyCodeLine{00493          \}}
\DoxyCodeLine{00494       \}}
\DoxyCodeLine{00495    \}}
\DoxyCodeLine{00496 }
\DoxyCodeLine{00497    \textcolor{comment}{/*}}
\DoxyCodeLine{00498 \textcolor{comment}{      Write the top legend.}}
\DoxyCodeLine{00499 \textcolor{comment}{   */}}
\DoxyCodeLine{00500    \textcolor{comment}{/* i == 15: bottom pixel row of header is output here */}}
\DoxyCodeLine{00501    \textcolor{comment}{/* left-\/hand legend: solid black line except for right-\/most pixel */}}
\DoxyCodeLine{00502    putchar (0x00);}
\DoxyCodeLine{00503    putchar (0x00);}
\DoxyCodeLine{00504    putchar (0x00);}
\DoxyCodeLine{00505    putchar (0x01);}
\DoxyCodeLine{00506    \textcolor{keywordflow}{for} (j = 0; j < 16; j++) \{}
\DoxyCodeLine{00507       putchar ((\string~toprow[15][j] >> 8) \& 0xFF);}
\DoxyCodeLine{00508       putchar ( \string~toprow[15][j]       \& 0xFF);}
\DoxyCodeLine{00509    \}}
\DoxyCodeLine{00510 }
\DoxyCodeLine{00511    putchar (0xFF);}
\DoxyCodeLine{00512    putchar (0xFF);}
\DoxyCodeLine{00513    putchar (0xFF);}
\DoxyCodeLine{00514    putchar (0xFC);}
\DoxyCodeLine{00515    \textcolor{keywordflow}{for} (j = 0; j < 16; j++) \{}
\DoxyCodeLine{00516       putchar ((\string~toprow[14][j] >> 8) \& 0xFF);}
\DoxyCodeLine{00517       putchar ( \string~toprow[14][j]       \& 0xFF);}
\DoxyCodeLine{00518    \}}
\DoxyCodeLine{00519 }
\DoxyCodeLine{00520    \textcolor{keywordflow}{for} (i = 13; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{00521       putchar (0xFF);}
\DoxyCodeLine{00522       putchar (0xFF);}
\DoxyCodeLine{00523       putchar (0xFF);}
\DoxyCodeLine{00524       putchar (0xFD);}
\DoxyCodeLine{00525       \textcolor{keywordflow}{for} (j = 0; j < 16; j++) \{}
\DoxyCodeLine{00526          putchar ((\string~toprow[i][j] >> 8) \& 0xFF);}
\DoxyCodeLine{00527          putchar ( \string~toprow[i][j]       \& 0xFF);}
\DoxyCodeLine{00528       \}}
\DoxyCodeLine{00529    \}}
\DoxyCodeLine{00530 }
\DoxyCodeLine{00531    \textcolor{comment}{/*}}
\DoxyCodeLine{00532 \textcolor{comment}{      Write the header.}}
\DoxyCodeLine{00533 \textcolor{comment}{   */}}
\DoxyCodeLine{00534 }
\DoxyCodeLine{00535    \textcolor{comment}{/* 7 completely white rows */}}
\DoxyCodeLine{00536    \textcolor{keywordflow}{for} (i = 7; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{00537       \textcolor{keywordflow}{for} (j = 0; j < 18; j++) \{}
\DoxyCodeLine{00538          putchar (0xFF);}
\DoxyCodeLine{00539          putchar (0xFF);}
\DoxyCodeLine{00540       \}}
\DoxyCodeLine{00541    \}}
\DoxyCodeLine{00542 }
\DoxyCodeLine{00543    \textcolor{keywordflow}{for} (i = 15; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{00544       \textcolor{comment}{/* left-\/hand legend */}}
\DoxyCodeLine{00545       putchar (0xFF);}
\DoxyCodeLine{00546       putchar (0xFF);}
\DoxyCodeLine{00547       putchar (0xFF);}
\DoxyCodeLine{00548       putchar (0xFF);}
\DoxyCodeLine{00549       \textcolor{comment}{/* header glyph */}}
\DoxyCodeLine{00550       \textcolor{keywordflow}{for} (j = 0; j < 16; j++) \{}
\DoxyCodeLine{00551          bytesout = \string~header[i][j] \& 0xFFFF;}
\DoxyCodeLine{00552          putchar ((bytesout >> 8) \& 0xFF);}
\DoxyCodeLine{00553          putchar ( bytesout       \& 0xFF);}
\DoxyCodeLine{00554       \}}
\DoxyCodeLine{00555    \}}
\DoxyCodeLine{00556 }
\DoxyCodeLine{00557    \textcolor{comment}{/* 8 completely white rows at very top */}}
\DoxyCodeLine{00558    \textcolor{keywordflow}{for} (i = 7; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{00559       \textcolor{keywordflow}{for} (j = 0; j < 18; j++) \{}
\DoxyCodeLine{00560       putchar (0xFF);}
\DoxyCodeLine{00561       putchar (0xFF);}
\DoxyCodeLine{00562       \}}
\DoxyCodeLine{00563    \}}
\DoxyCodeLine{00564 }
\DoxyCodeLine{00565    \textcolor{keywordflow}{return};}
\DoxyCodeLine{00566 \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=234pt]{unifontpic_8c_afd429d88175c59dae5c32e8c9aa7851d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=223pt]{unifontpic_8c_afd429d88175c59dae5c32e8c9aa7851d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{unifontpic_8c_a3931c7b44c00ffdb8925a3c837577677}\label{unifontpic_8c_a3931c7b44c00ffdb8925a3c837577677}} 
\index{unifontpic.c@{unifontpic.c}!genwidebmp@{genwidebmp}}
\index{genwidebmp@{genwidebmp}!unifontpic.c@{unifontpic.c}}
\doxysubsubsection{\texorpdfstring{genwidebmp()}{genwidebmp()}}
{\footnotesize\ttfamily void genwidebmp (\begin{DoxyParamCaption}\item[{int}]{plane\+\_\+array\mbox{[}0x10000\mbox{]}\mbox{[}16\mbox{]},  }\item[{int}]{dpi,  }\item[{int}]{tinynum,  }\item[{int}]{plane }\end{DoxyParamCaption})}



Generate the BMP output file in wide format. 

This function generates the BMP output file from a bitmap parameter. This is a wide bitmap, 256 glyphs wide by 256 glyphs tall.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em plane\+\_\+array} & The array of glyph bitmaps for a plane. \\
\hline
\mbox{\texttt{ in}}  & {\em dpi} & Dots per inch, for encoding in the BMP output file header. \\
\hline
\mbox{\texttt{ in}}  & {\em tinynum} & Whether to generate tiny numbers in 256x256 grid. \\
\hline
\mbox{\texttt{ in}}  & {\em plane} & The Unicode plane, 0..17. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{unifontpic_8c_source_l00581}{581}} of file \mbox{\hyperlink{unifontpic_8c_source}{unifontpic.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00582 \{}
\DoxyCodeLine{00583 }
\DoxyCodeLine{00584    \textcolor{keywordtype}{char} header\_string[257];}
\DoxyCodeLine{00585    \textcolor{keywordtype}{char} raw\_header[\mbox{\hyperlink{unifontpic_8c_af314b4eee945c2791f7890f72f0623af}{HDR\_LEN}}];}
\DoxyCodeLine{00586    \textcolor{keywordtype}{int} header[16][256]; \textcolor{comment}{/* header row, for chart title */}}
\DoxyCodeLine{00587    \textcolor{keywordtype}{int} hdrlen;         \textcolor{comment}{/* length of HEADER\_STRING */}}
\DoxyCodeLine{00588    \textcolor{keywordtype}{int} startcol;       \textcolor{comment}{/* column to start printing header, for centering */}}
\DoxyCodeLine{00589 }
\DoxyCodeLine{00590    \textcolor{keywordtype}{unsigned} leftcol[0x100][16]; \textcolor{comment}{/* code point legend on left side of chart */}}
\DoxyCodeLine{00591    \textcolor{keywordtype}{int} d1, d2, d3, d4;          \textcolor{comment}{/* digits for filling leftcol[][] legend   */}}
\DoxyCodeLine{00592    \textcolor{keywordtype}{int} codept;                  \textcolor{comment}{/* current starting code point for legend  */}}
\DoxyCodeLine{00593    \textcolor{keywordtype}{int} thisrow;                 \textcolor{comment}{/* glyph row currently being rendered      */}}
\DoxyCodeLine{00594    \textcolor{keywordtype}{unsigned} toprow[32][256];    \textcolor{comment}{/* code point legend on top of chart       */}}
\DoxyCodeLine{00595    \textcolor{keywordtype}{int} digitrow;      \textcolor{comment}{/* row we're in (0..4) for the above hexdigit digits */}}
\DoxyCodeLine{00596    \textcolor{keywordtype}{int} hexalpha1, hexalpha2;    \textcolor{comment}{/* to convert hex digits to ASCII          */}}
\DoxyCodeLine{00597 }
\DoxyCodeLine{00598    \textcolor{comment}{/*}}
\DoxyCodeLine{00599 \textcolor{comment}{      DataOffset = BMP Header bytes + InfoHeader bytes + ColorTable bytes.}}
\DoxyCodeLine{00600 \textcolor{comment}{   */}}
\DoxyCodeLine{00601    \textcolor{keywordtype}{int} DataOffset = 14 + 40 + 8; \textcolor{comment}{/* fixed size for monochrome BMP */}}
\DoxyCodeLine{00602    \textcolor{keywordtype}{int} ImageSize;}
\DoxyCodeLine{00603    \textcolor{keywordtype}{int} FileSize;}
\DoxyCodeLine{00604    \textcolor{keywordtype}{int} Width, Height; \textcolor{comment}{/* bitmap image width and height in pixels */}}
\DoxyCodeLine{00605    \textcolor{keywordtype}{int} ppm;     \textcolor{comment}{/* integer pixels per meter */}}
\DoxyCodeLine{00606 }
\DoxyCodeLine{00607    \textcolor{keywordtype}{int} i, j, k;}
\DoxyCodeLine{00608 }
\DoxyCodeLine{00609    \textcolor{keywordtype}{unsigned} bytesout;}
\DoxyCodeLine{00610 }
\DoxyCodeLine{00611    \textcolor{keywordtype}{void} \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}}(\textcolor{keywordtype}{int}), \mbox{\hyperlink{unifontpic_8c_af1fbb002e4787785de92e073ec46b787}{output2}}(\textcolor{keywordtype}{int});}
\DoxyCodeLine{00612 }
\DoxyCodeLine{00613    \textcolor{comment}{/*}}
\DoxyCodeLine{00614 \textcolor{comment}{      Image width and height, in pixels.}}
\DoxyCodeLine{00615 \textcolor{comment}{}}
\DoxyCodeLine{00616 \textcolor{comment}{         N.B.: Width must be an even multiple of 32 pixels, or 4 bytes.}}
\DoxyCodeLine{00617 \textcolor{comment}{   */}}
\DoxyCodeLine{00618    Width  = 258 * 16;  \textcolor{comment}{/* (           2 legend + 256 glyphs) * 16 pixels/glyph */}}
\DoxyCodeLine{00619    Height = 260 * 16;  \textcolor{comment}{/* (2 header + 2 legend + 256 glyphs) * 16 rows/glyph   */}}
\DoxyCodeLine{00620 }
\DoxyCodeLine{00621    ImageSize = Height * (Width / 8); \textcolor{comment}{/* in bytes, calculated from pixels */}}
\DoxyCodeLine{00622 }
\DoxyCodeLine{00623    FileSize = DataOffset + ImageSize;}
\DoxyCodeLine{00624 }
\DoxyCodeLine{00625    \textcolor{comment}{/* convert dots/inch to pixels/meter */}}
\DoxyCodeLine{00626    \textcolor{keywordflow}{if} (dpi == 0) dpi = 96;}
\DoxyCodeLine{00627    ppm = (int)((\textcolor{keywordtype}{double})dpi * 100.0 / 2.54 + 0.5);}
\DoxyCodeLine{00628 }
\DoxyCodeLine{00629    \textcolor{comment}{/*}}
\DoxyCodeLine{00630 \textcolor{comment}{      Generate the BMP Header}}
\DoxyCodeLine{00631 \textcolor{comment}{   */}}
\DoxyCodeLine{00632    putchar (\textcolor{charliteral}{'B'});}
\DoxyCodeLine{00633    putchar (\textcolor{charliteral}{'M'});}
\DoxyCodeLine{00634    \textcolor{comment}{/*}}
\DoxyCodeLine{00635 \textcolor{comment}{      Calculate file size:}}
\DoxyCodeLine{00636 \textcolor{comment}{}}
\DoxyCodeLine{00637 \textcolor{comment}{         BMP Header + InfoHeader + Color Table + Raster Data}}
\DoxyCodeLine{00638 \textcolor{comment}{   */}}
\DoxyCodeLine{00639    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (FileSize);  \textcolor{comment}{/* FileSize */}}
\DoxyCodeLine{00640    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (0x0000); \textcolor{comment}{/* reserved */}}
\DoxyCodeLine{00641    \textcolor{comment}{/* Calculate DataOffset */}}
\DoxyCodeLine{00642    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (DataOffset);}
\DoxyCodeLine{00643 }
\DoxyCodeLine{00644    \textcolor{comment}{/*}}
\DoxyCodeLine{00645 \textcolor{comment}{      InfoHeader}}
\DoxyCodeLine{00646 \textcolor{comment}{   */}}
\DoxyCodeLine{00647    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (40);         \textcolor{comment}{/* Size of InfoHeader                       */}}
\DoxyCodeLine{00648    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (Width);      \textcolor{comment}{/* Width of bitmap in pixels                */}}
\DoxyCodeLine{00649    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (Height);     \textcolor{comment}{/* Height of bitmap in pixels               */}}
\DoxyCodeLine{00650    \mbox{\hyperlink{unifontpic_8c_af1fbb002e4787785de92e073ec46b787}{output2}} (1);          \textcolor{comment}{/* Planes (1 plane)                         */}}
\DoxyCodeLine{00651    \mbox{\hyperlink{unifontpic_8c_af1fbb002e4787785de92e073ec46b787}{output2}} (1);          \textcolor{comment}{/* BitCount (1 = monochrome)                */}}
\DoxyCodeLine{00652    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (0);          \textcolor{comment}{/* Compression (0 = none)                   */}}
\DoxyCodeLine{00653    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (ImageSize);  \textcolor{comment}{/* ImageSize, in bytes                      */}}
\DoxyCodeLine{00654    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (ppm);        \textcolor{comment}{/* XpixelsPerM (96 dpi = 3780 pixels/meter) */}}
\DoxyCodeLine{00655    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (ppm);        \textcolor{comment}{/* YpixelsPerM (96 dpi = 3780 pixels/meter) */}}
\DoxyCodeLine{00656    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (2);          \textcolor{comment}{/* ColorsUsed (= 2)                         */}}
\DoxyCodeLine{00657    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (2);          \textcolor{comment}{/* ColorsImportant (= 2)                    */}}
\DoxyCodeLine{00658    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (0x00000000); \textcolor{comment}{/* black (reserved, B, G, R)                */}}
\DoxyCodeLine{00659    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (0x00FFFFFF); \textcolor{comment}{/* white (reserved, B, G, R)                */}}
\DoxyCodeLine{00660 }
\DoxyCodeLine{00661    \textcolor{comment}{/*}}
\DoxyCodeLine{00662 \textcolor{comment}{      Create header row bits.}}
\DoxyCodeLine{00663 \textcolor{comment}{   */}}
\DoxyCodeLine{00664    snprintf (raw\_header, \mbox{\hyperlink{unifontpic_8c_af314b4eee945c2791f7890f72f0623af}{HDR\_LEN}}, \textcolor{stringliteral}{"{}\%s Plane \%d"{}}, \mbox{\hyperlink{unifontpic_8h_a418ed439fafbc678a74cb266ef2919d4}{HEADER\_STRING}}, plane);}
\DoxyCodeLine{00665    memset ((\textcolor{keywordtype}{void} *)header, 0, 256 * 16 * \textcolor{keyword}{sizeof} (\textcolor{keywordtype}{int})); \textcolor{comment}{/* fill with white */}}
\DoxyCodeLine{00666    memset ((\textcolor{keywordtype}{void} *)header\_string, \textcolor{charliteral}{' '}, 256 * \textcolor{keyword}{sizeof} (\textcolor{keywordtype}{char})); \textcolor{comment}{/* 256 spaces */}}
\DoxyCodeLine{00667    header\_string[256] = \textcolor{charliteral}{'\(\backslash\)0'};  \textcolor{comment}{/* null-\/terminated */}}
\DoxyCodeLine{00668 }
\DoxyCodeLine{00669    hdrlen = strlen (raw\_header);}
\DoxyCodeLine{00670    \textcolor{comment}{/* Wide bitmap can print 256 columns, but limit to 32 columns for long bitmap. */}}
\DoxyCodeLine{00671    \textcolor{keywordflow}{if} (hdrlen > 32) hdrlen = 32;}
\DoxyCodeLine{00672    startcol = 127 -\/ ((hdrlen -\/ 1) >> 1);  \textcolor{comment}{/* to center header */}}
\DoxyCodeLine{00673    \textcolor{comment}{/* center up to 32 chars */}}
\DoxyCodeLine{00674    memcpy (\&header\_string[startcol], raw\_header, hdrlen);}
\DoxyCodeLine{00675 }
\DoxyCodeLine{00676    \textcolor{comment}{/* Copy each letter's bitmap from the plane\_array[][] we constructed. */}}
\DoxyCodeLine{00677    \textcolor{keywordflow}{for} (j = 0; j < 256; j++) \{}
\DoxyCodeLine{00678       \textcolor{keywordflow}{for} (i = 0; i < 16; i++) \{}
\DoxyCodeLine{00679          header[i][j] = \mbox{\hyperlink{unifontpic_8h_a593ebc374e9f30c90743f0fd48cc91df}{ascii\_bits}}[header\_string[j] \& 0x7F][i];}
\DoxyCodeLine{00680       \}}
\DoxyCodeLine{00681    \}}
\DoxyCodeLine{00682 }
\DoxyCodeLine{00683    \textcolor{comment}{/*}}
\DoxyCodeLine{00684 \textcolor{comment}{      Create the left column legend.}}
\DoxyCodeLine{00685 \textcolor{comment}{   */}}
\DoxyCodeLine{00686    memset ((\textcolor{keywordtype}{void} *)leftcol, 0, 256 * 16 * \textcolor{keyword}{sizeof} (\textcolor{keywordtype}{unsigned}));}
\DoxyCodeLine{00687 }
\DoxyCodeLine{00688    \textcolor{keywordflow}{for} (codept = 0x0000; codept < 0x10000; codept += 0x100) \{}
\DoxyCodeLine{00689       d1 = (codept >> 12) \& 0xF; \textcolor{comment}{/* most significant hex digit */}}
\DoxyCodeLine{00690       d2 = (codept >>  8) \& 0xF;}
\DoxyCodeLine{00691 }
\DoxyCodeLine{00692       thisrow = codept >> 8; \textcolor{comment}{/* rows of 256 glyphs */}}
\DoxyCodeLine{00693 }
\DoxyCodeLine{00694       \textcolor{comment}{/* fill in first and second digits */}}
\DoxyCodeLine{00695 }
\DoxyCodeLine{00696       \textcolor{keywordflow}{if} (tinynum) \{ \textcolor{comment}{/* use 4x5 pixel glyphs */}}
\DoxyCodeLine{00697          \textcolor{keywordflow}{for} (digitrow = 0; digitrow < 5; digitrow++) \{}
\DoxyCodeLine{00698             leftcol[thisrow][6 + digitrow] =}
\DoxyCodeLine{00699                (\mbox{\hyperlink{unibmp2hex_8c_a8e50648544568f9274781c2c90acdd78}{hexdigit}}[d1][digitrow] << 10) |}
\DoxyCodeLine{00700                (\mbox{\hyperlink{unibmp2hex_8c_a8e50648544568f9274781c2c90acdd78}{hexdigit}}[d2][digitrow] <<  4);}
\DoxyCodeLine{00701          \}}
\DoxyCodeLine{00702       \}}
\DoxyCodeLine{00703       \textcolor{keywordflow}{else} \{ \textcolor{comment}{/* bigger numbers -\/-\/ use glyphs from Unifont itself */}}
\DoxyCodeLine{00704          \textcolor{comment}{/* convert hexadecimal digits to ASCII equivalent */}}
\DoxyCodeLine{00705          hexalpha1 = d1 < 0xA ? \textcolor{charliteral}{'0'} + d1 : \textcolor{charliteral}{'A'} + d1 -\/ 0xA;}
\DoxyCodeLine{00706          hexalpha2 = d2 < 0xA ? \textcolor{charliteral}{'0'} + d2 : \textcolor{charliteral}{'A'} + d2 -\/ 0xA;}
\DoxyCodeLine{00707 }
\DoxyCodeLine{00708          \textcolor{keywordflow}{for} (i = 0 ; i < 16; i++) \{}
\DoxyCodeLine{00709             leftcol[thisrow][i] =}
\DoxyCodeLine{00710                (\mbox{\hyperlink{unifontpic_8h_a593ebc374e9f30c90743f0fd48cc91df}{ascii\_bits}}[hexalpha1][i] << 2) |}
\DoxyCodeLine{00711                (\mbox{\hyperlink{unifontpic_8h_a593ebc374e9f30c90743f0fd48cc91df}{ascii\_bits}}[hexalpha2][i] >> 6);}
\DoxyCodeLine{00712          \}}
\DoxyCodeLine{00713       \}}
\DoxyCodeLine{00714 }
\DoxyCodeLine{00715       \textcolor{keywordflow}{for} (i = 0; i < 15; i ++) \{}
\DoxyCodeLine{00716          leftcol[thisrow][i] |= 0x00000002;      \textcolor{comment}{/* right border */}}
\DoxyCodeLine{00717       \}}
\DoxyCodeLine{00718 }
\DoxyCodeLine{00719       leftcol[thisrow][15] = 0x0000FFFE;        \textcolor{comment}{/* bottom border */}}
\DoxyCodeLine{00720 }
\DoxyCodeLine{00721       \textcolor{keywordflow}{if} (d2 == 0xF) \{                     \textcolor{comment}{/* 4096-\/point boundary */}}
\DoxyCodeLine{00722          leftcol[thisrow][15] |= 0x00FF0000;  \textcolor{comment}{/* longer tic mark */}}
\DoxyCodeLine{00723       \}}
\DoxyCodeLine{00724 }
\DoxyCodeLine{00725       \textcolor{keywordflow}{if} ((thisrow \% 0x40) == 0x3F) \{    \textcolor{comment}{/* 16,384-\/point boundary */}}
\DoxyCodeLine{00726          leftcol[thisrow][15] |= 0xFFFF0000; \textcolor{comment}{/* longest tic mark */}}
\DoxyCodeLine{00727       \}}
\DoxyCodeLine{00728    \}}
\DoxyCodeLine{00729 }
\DoxyCodeLine{00730    \textcolor{comment}{/*}}
\DoxyCodeLine{00731 \textcolor{comment}{      Create the top row legend.}}
\DoxyCodeLine{00732 \textcolor{comment}{   */}}
\DoxyCodeLine{00733    memset ((\textcolor{keywordtype}{void} *)toprow, 0, 32 * 256 * \textcolor{keyword}{sizeof} (\textcolor{keywordtype}{unsigned}));}
\DoxyCodeLine{00734 }
\DoxyCodeLine{00735    \textcolor{keywordflow}{for} (codept = 0x00; codept <= 0xFF; codept++) \{}
\DoxyCodeLine{00736       d3 = (codept >>  4) \& 0xF;}
\DoxyCodeLine{00737       d4 =  codept        \& 0xF; \textcolor{comment}{/* least significant hex digit */}}
\DoxyCodeLine{00738 }
\DoxyCodeLine{00739       \textcolor{keywordflow}{if} (tinynum) \{}
\DoxyCodeLine{00740          \textcolor{keywordflow}{for} (digitrow = 0; digitrow < 5; digitrow++) \{}
\DoxyCodeLine{00741             toprow[16 + 6 + digitrow][codept] =}
\DoxyCodeLine{00742                (\mbox{\hyperlink{unibmp2hex_8c_a8e50648544568f9274781c2c90acdd78}{hexdigit}}[d3][digitrow] << 10) |}
\DoxyCodeLine{00743                (\mbox{\hyperlink{unibmp2hex_8c_a8e50648544568f9274781c2c90acdd78}{hexdigit}}[d4][digitrow] <<  4);}
\DoxyCodeLine{00744          \}}
\DoxyCodeLine{00745       \}}
\DoxyCodeLine{00746       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00747          \textcolor{comment}{/* convert hexadecimal digits to ASCII equivalent */}}
\DoxyCodeLine{00748          hexalpha1 = d3 < 0xA ? \textcolor{charliteral}{'0'} + d3 : \textcolor{charliteral}{'A'} + d3 -\/ 0xA;}
\DoxyCodeLine{00749          hexalpha2 = d4 < 0xA ? \textcolor{charliteral}{'0'} + d4 : \textcolor{charliteral}{'A'} + d4 -\/ 0xA;}
\DoxyCodeLine{00750          \textcolor{keywordflow}{for} (i = 0 ; i < 16; i++) \{}
\DoxyCodeLine{00751             toprow[14 + i][codept] =}
\DoxyCodeLine{00752                (\mbox{\hyperlink{unifontpic_8h_a593ebc374e9f30c90743f0fd48cc91df}{ascii\_bits}}[hexalpha1][i]     ) |}
\DoxyCodeLine{00753                (\mbox{\hyperlink{unifontpic_8h_a593ebc374e9f30c90743f0fd48cc91df}{ascii\_bits}}[hexalpha2][i] >> 7);}
\DoxyCodeLine{00754          \}}
\DoxyCodeLine{00755       \}}
\DoxyCodeLine{00756    \}}
\DoxyCodeLine{00757 }
\DoxyCodeLine{00758    \textcolor{keywordflow}{for} (j = 0; j < 256; j++) \{}
\DoxyCodeLine{00759       \textcolor{comment}{/* force bottom pixel row to be white, for separation from glyphs */}}
\DoxyCodeLine{00760       toprow[16 + 15][j] = 0x0000;}
\DoxyCodeLine{00761    \}}
\DoxyCodeLine{00762 }
\DoxyCodeLine{00763    \textcolor{comment}{/* 1 pixel row with left-\/hand legend line */}}
\DoxyCodeLine{00764    \textcolor{keywordflow}{for} (j = 0; j < 256; j++) \{}
\DoxyCodeLine{00765       toprow[16 + 14][j] |= 0xFFFF;}
\DoxyCodeLine{00766    \}}
\DoxyCodeLine{00767 }
\DoxyCodeLine{00768    \textcolor{comment}{/* 14 rows with line on left to fill out this character row */}}
\DoxyCodeLine{00769    \textcolor{keywordflow}{for} (i = 13; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{00770       \textcolor{keywordflow}{for} (j = 0; j < 256; j++) \{}
\DoxyCodeLine{00771          toprow[16 + i][j] |= 0x0001;}
\DoxyCodeLine{00772       \}}
\DoxyCodeLine{00773    \}}
\DoxyCodeLine{00774 }
\DoxyCodeLine{00775    \textcolor{comment}{/* Form the longer tic marks in top legend */}}
\DoxyCodeLine{00776    \textcolor{keywordflow}{for} (i = 8; i < 16; i++) \{}
\DoxyCodeLine{00777       \textcolor{keywordflow}{for} (j = 0x0F; j < 0x100; j += 0x10) \{}
\DoxyCodeLine{00778          toprow[i][j] |= 0x0001;}
\DoxyCodeLine{00779       \}}
\DoxyCodeLine{00780    \}}
\DoxyCodeLine{00781 }
\DoxyCodeLine{00782    \textcolor{comment}{/*}}
\DoxyCodeLine{00783 \textcolor{comment}{      Now write the raster image.}}
\DoxyCodeLine{00784 \textcolor{comment}{}}
\DoxyCodeLine{00785 \textcolor{comment}{      XOR each byte with 0xFF because black = 0, white = 1 in BMP.}}
\DoxyCodeLine{00786 \textcolor{comment}{   */}}
\DoxyCodeLine{00787 }
\DoxyCodeLine{00788    \textcolor{comment}{/* Write the glyphs, bottom-\/up, left-\/to-\/right, in rows of 16 (i.e., 0x10) */}}
\DoxyCodeLine{00789    \textcolor{keywordflow}{for} (i = 0xFF00; i >= 0; i -\/= 0x100) \{}
\DoxyCodeLine{00790       thisrow = i >> 8; \textcolor{comment}{/* 256 glyphs per row */}}
\DoxyCodeLine{00791       \textcolor{keywordflow}{for} (j = 15; j >= 0; j-\/-\/) \{}
\DoxyCodeLine{00792          \textcolor{comment}{/* left-\/hand legend */}}
\DoxyCodeLine{00793          putchar ((\string~leftcol[thisrow][j] >> 24) \& 0xFF);}
\DoxyCodeLine{00794          putchar ((\string~leftcol[thisrow][j] >> 16) \& 0xFF);}
\DoxyCodeLine{00795          putchar ((\string~leftcol[thisrow][j] >>  8) \& 0xFF);}
\DoxyCodeLine{00796          putchar ( \string~leftcol[thisrow][j]        \& 0xFF);}
\DoxyCodeLine{00797          \textcolor{comment}{/* Unifont glyph */}}
\DoxyCodeLine{00798          \textcolor{keywordflow}{for} (k = 0x00; k < 0x100; k++) \{}
\DoxyCodeLine{00799             bytesout = \string~plane\_array[i+k][j] \& 0xFFFF;}
\DoxyCodeLine{00800             putchar ((bytesout >> 8) \& 0xFF);}
\DoxyCodeLine{00801             putchar ( bytesout       \& 0xFF);}
\DoxyCodeLine{00802          \}}
\DoxyCodeLine{00803       \}}
\DoxyCodeLine{00804    \}}
\DoxyCodeLine{00805 }
\DoxyCodeLine{00806    \textcolor{comment}{/*}}
\DoxyCodeLine{00807 \textcolor{comment}{      Write the top legend.}}
\DoxyCodeLine{00808 \textcolor{comment}{   */}}
\DoxyCodeLine{00809    \textcolor{comment}{/* i == 15: bottom pixel row of header is output here */}}
\DoxyCodeLine{00810    \textcolor{comment}{/* left-\/hand legend: solid black line except for right-\/most pixel */}}
\DoxyCodeLine{00811    putchar (0x00);}
\DoxyCodeLine{00812    putchar (0x00);}
\DoxyCodeLine{00813    putchar (0x00);}
\DoxyCodeLine{00814    putchar (0x01);}
\DoxyCodeLine{00815    \textcolor{keywordflow}{for} (j = 0; j < 256; j++) \{}
\DoxyCodeLine{00816       putchar ((\string~toprow[16 + 15][j] >> 8) \& 0xFF);}
\DoxyCodeLine{00817       putchar ( \string~toprow[16 + 15][j]       \& 0xFF);}
\DoxyCodeLine{00818    \}}
\DoxyCodeLine{00819 }
\DoxyCodeLine{00820    putchar (0xFF);}
\DoxyCodeLine{00821    putchar (0xFF);}
\DoxyCodeLine{00822    putchar (0xFF);}
\DoxyCodeLine{00823    putchar (0xFC);}
\DoxyCodeLine{00824    \textcolor{keywordflow}{for} (j = 0; j < 256; j++) \{}
\DoxyCodeLine{00825       putchar ((\string~toprow[16 + 14][j] >> 8) \& 0xFF);}
\DoxyCodeLine{00826       putchar ( \string~toprow[16 + 14][j]       \& 0xFF);}
\DoxyCodeLine{00827    \}}
\DoxyCodeLine{00828 }
\DoxyCodeLine{00829    \textcolor{keywordflow}{for} (i = 16 + 13; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{00830       \textcolor{keywordflow}{if} (i >= 8) \{ \textcolor{comment}{/* make vertical stroke on right */}}
\DoxyCodeLine{00831          putchar (0xFF);}
\DoxyCodeLine{00832          putchar (0xFF);}
\DoxyCodeLine{00833          putchar (0xFF);}
\DoxyCodeLine{00834          putchar (0xFD);}
\DoxyCodeLine{00835       \}}
\DoxyCodeLine{00836       \textcolor{keywordflow}{else} \{ \textcolor{comment}{/* all white */}}
\DoxyCodeLine{00837          putchar (0xFF);}
\DoxyCodeLine{00838          putchar (0xFF);}
\DoxyCodeLine{00839          putchar (0xFF);}
\DoxyCodeLine{00840          putchar (0xFF);}
\DoxyCodeLine{00841       \}}
\DoxyCodeLine{00842       \textcolor{keywordflow}{for} (j = 0; j < 256; j++) \{}
\DoxyCodeLine{00843          putchar ((\string~toprow[i][j] >> 8) \& 0xFF);}
\DoxyCodeLine{00844          putchar ( \string~toprow[i][j]       \& 0xFF);}
\DoxyCodeLine{00845       \}}
\DoxyCodeLine{00846    \}}
\DoxyCodeLine{00847 }
\DoxyCodeLine{00848    \textcolor{comment}{/*}}
\DoxyCodeLine{00849 \textcolor{comment}{      Write the header.}}
\DoxyCodeLine{00850 \textcolor{comment}{   */}}
\DoxyCodeLine{00851 }
\DoxyCodeLine{00852    \textcolor{comment}{/* 8 completely white rows */}}
\DoxyCodeLine{00853    \textcolor{keywordflow}{for} (i = 7; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{00854       \textcolor{keywordflow}{for} (j = 0; j < 258; j++) \{}
\DoxyCodeLine{00855          putchar (0xFF);}
\DoxyCodeLine{00856          putchar (0xFF);}
\DoxyCodeLine{00857       \}}
\DoxyCodeLine{00858    \}}
\DoxyCodeLine{00859 }
\DoxyCodeLine{00860    \textcolor{keywordflow}{for} (i = 15; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{00861       \textcolor{comment}{/* left-\/hand legend */}}
\DoxyCodeLine{00862       putchar (0xFF);}
\DoxyCodeLine{00863       putchar (0xFF);}
\DoxyCodeLine{00864       putchar (0xFF);}
\DoxyCodeLine{00865       putchar (0xFF);}
\DoxyCodeLine{00866       \textcolor{comment}{/* header glyph */}}
\DoxyCodeLine{00867       \textcolor{keywordflow}{for} (j = 0; j < 256; j++) \{}
\DoxyCodeLine{00868          bytesout = \string~header[i][j] \& 0xFFFF;}
\DoxyCodeLine{00869          putchar ((bytesout >> 8) \& 0xFF);}
\DoxyCodeLine{00870          putchar ( bytesout       \& 0xFF);}
\DoxyCodeLine{00871       \}}
\DoxyCodeLine{00872    \}}
\DoxyCodeLine{00873 }
\DoxyCodeLine{00874    \textcolor{comment}{/* 8 completely white rows at very top */}}
\DoxyCodeLine{00875    \textcolor{keywordflow}{for} (i = 7; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{00876       \textcolor{keywordflow}{for} (j = 0; j < 258; j++) \{}
\DoxyCodeLine{00877       putchar (0xFF);}
\DoxyCodeLine{00878       putchar (0xFF);}
\DoxyCodeLine{00879       \}}
\DoxyCodeLine{00880    \}}
\DoxyCodeLine{00881 }
\DoxyCodeLine{00882    \textcolor{keywordflow}{return};}
\DoxyCodeLine{00883 \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=236pt]{unifontpic_8c_a3931c7b44c00ffdb8925a3c837577677_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=225pt]{unifontpic_8c_a3931c7b44c00ffdb8925a3c837577677_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{unifontpic_8c_a0a030f2857f0d855b7ab0ccd8e968f1f}\label{unifontpic_8c_a0a030f2857f0d855b7ab0ccd8e968f1f}} 
\index{unifontpic.c@{unifontpic.c}!gethex@{gethex}}
\index{gethex@{gethex}!unifontpic.c@{unifontpic.c}}
\doxysubsubsection{\texorpdfstring{gethex()}{gethex()}}
{\footnotesize\ttfamily void gethex (\begin{DoxyParamCaption}\item[{char $\ast$}]{instring,  }\item[{int}]{plane\+\_\+array\mbox{[}0x10000\mbox{]}\mbox{[}16\mbox{]},  }\item[{int}]{plane }\end{DoxyParamCaption})}



Read a Unifont .hex-\/format input file from stdin. 

Each glyph can be 2, 4, 6, or 8 ASCII hexadecimal digits wide. \mbox{\hyperlink{struct_glyph}{Glyph}} height is fixed at 16 pixels.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em instring} & One line from a Unifont .hex-\/format file. \\
\hline
\mbox{\texttt{ in,out}}  & {\em plane\+\_\+array} & Bitmap for this plane, one bitmap row per element. \\
\hline
\mbox{\texttt{ in}}  & {\em plane} & The Unicode plane, 0..17. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{unifontpic_8c_source_l00215}{215}} of file \mbox{\hyperlink{unifontpic_8c_source}{unifontpic.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00216 \{}
\DoxyCodeLine{00217    \textcolor{keywordtype}{char} *bitstring;  \textcolor{comment}{/* pointer into instring for glyph bitmap */}}
\DoxyCodeLine{00218    \textcolor{keywordtype}{int} i;       \textcolor{comment}{/* loop variable                               */}}
\DoxyCodeLine{00219    \textcolor{keywordtype}{int} codept;  \textcolor{comment}{/* the Unicode code point of the current glyph */}}
\DoxyCodeLine{00220    \textcolor{keywordtype}{int} glyph\_plane; \textcolor{comment}{/* Unicode plane of current glyph          */}}
\DoxyCodeLine{00221    \textcolor{keywordtype}{int} ndigits; \textcolor{comment}{/* number of ASCII hexadecimal digits in glyph */}}
\DoxyCodeLine{00222    \textcolor{keywordtype}{int} bytespl; \textcolor{comment}{/* bytes per line of pixels in a glyph         */}}
\DoxyCodeLine{00223    \textcolor{keywordtype}{int} temprow; \textcolor{comment}{/* 1 row of a quadruple-\/width glyph            */}}
\DoxyCodeLine{00224    \textcolor{keywordtype}{int} newrow;  \textcolor{comment}{/* 1 row of double-\/width output pixels         */}}
\DoxyCodeLine{00225    \textcolor{keywordtype}{unsigned} bitmask; \textcolor{comment}{/* to mask off 2 bits of long width glyph */}}
\DoxyCodeLine{00226 }
\DoxyCodeLine{00227    \textcolor{comment}{/*}}
\DoxyCodeLine{00228 \textcolor{comment}{      Read each input line and place its glyph into the bit array.}}
\DoxyCodeLine{00229 \textcolor{comment}{   */}}
\DoxyCodeLine{00230    sscanf (instring, \textcolor{stringliteral}{"{}\%X"{}}, \&codept);}
\DoxyCodeLine{00231    glyph\_plane = codept >> 16;}
\DoxyCodeLine{00232    \textcolor{keywordflow}{if} (glyph\_plane == plane) \{}
\DoxyCodeLine{00233       codept \&= 0xFFFF;  \textcolor{comment}{/* array index will only have 16 bit address */}}
\DoxyCodeLine{00234       \textcolor{comment}{/* find the colon separator */}}
\DoxyCodeLine{00235       \textcolor{keywordflow}{for} (i = 0; (i < 9) \&\& (instring[i] != \textcolor{charliteral}{':'}); i++);}
\DoxyCodeLine{00236       i++; \textcolor{comment}{/* position past it */}}
\DoxyCodeLine{00237       bitstring = \&instring[i];}
\DoxyCodeLine{00238       ndigits = strlen (bitstring);}
\DoxyCodeLine{00239       \textcolor{comment}{/* don't count '\(\backslash\)n' at end of line if present */}}
\DoxyCodeLine{00240       \textcolor{keywordflow}{if} (bitstring[ndigits -\/ 1] == \textcolor{charliteral}{'\(\backslash\)n'}) ndigits-\/-\/;}
\DoxyCodeLine{00241       bytespl = ndigits >> 5;  \textcolor{comment}{/* 16 rows per line, 2 digits per byte */}}
\DoxyCodeLine{00242 }
\DoxyCodeLine{00243       \textcolor{keywordflow}{if} (bytespl >= 1 \&\& bytespl <= 4) \{}
\DoxyCodeLine{00244          \textcolor{keywordflow}{for} (i = 0; i < 16; i++) \{ \textcolor{comment}{/* 16 rows per glyph */}}
\DoxyCodeLine{00245             \textcolor{comment}{/* Read correct number of hexadecimal digits given glyph width */}}
\DoxyCodeLine{00246             \textcolor{keywordflow}{switch} (bytespl) \{}
\DoxyCodeLine{00247                \textcolor{keywordflow}{case} 1: sscanf (bitstring, \textcolor{stringliteral}{"{}\%2X"{}}, \&temprow);}
\DoxyCodeLine{00248                        bitstring += 2;}
\DoxyCodeLine{00249                        temprow <<= 8; \textcolor{comment}{/* left-\/justify single-\/width glyph */}}
\DoxyCodeLine{00250                        \textcolor{keywordflow}{break};}
\DoxyCodeLine{00251                \textcolor{keywordflow}{case} 2: sscanf (bitstring, \textcolor{stringliteral}{"{}\%4X"{}}, \&temprow);}
\DoxyCodeLine{00252                        bitstring += 4;}
\DoxyCodeLine{00253                        \textcolor{keywordflow}{break};}
\DoxyCodeLine{00254                \textcolor{comment}{/* cases 3 and 4 widths will be compressed by 50\% (see below) */}}
\DoxyCodeLine{00255                \textcolor{keywordflow}{case} 3: sscanf (bitstring, \textcolor{stringliteral}{"{}\%6X"{}}, \&temprow);}
\DoxyCodeLine{00256                        bitstring += 6;}
\DoxyCodeLine{00257                        temprow <<= 8; \textcolor{comment}{/* left-\/justify */}}
\DoxyCodeLine{00258                        \textcolor{keywordflow}{break};}
\DoxyCodeLine{00259                \textcolor{keywordflow}{case} 4: sscanf (bitstring, \textcolor{stringliteral}{"{}\%8X"{}}, \&temprow);}
\DoxyCodeLine{00260                        bitstring += 8;}
\DoxyCodeLine{00261                        \textcolor{keywordflow}{break};}
\DoxyCodeLine{00262             \}  \textcolor{comment}{/* switch on number of bytes per row */}}
\DoxyCodeLine{00263             \textcolor{comment}{/* compress glyph width by 50\% if greater than double-\/width */}}
\DoxyCodeLine{00264             \textcolor{keywordflow}{if} (bytespl > 2) \{}
\DoxyCodeLine{00265                newrow = 0x0000;}
\DoxyCodeLine{00266                \textcolor{comment}{/* mask off 2 bits at a time to convert each pair to 1 bit out */}}
\DoxyCodeLine{00267                \textcolor{keywordflow}{for} (bitmask = 0xC0000000; bitmask != 0; bitmask >>= 2) \{}
\DoxyCodeLine{00268                   newrow <<= 1;}
\DoxyCodeLine{00269                   \textcolor{keywordflow}{if} ((temprow \& bitmask) != 0) newrow |= 1;}
\DoxyCodeLine{00270                \}}
\DoxyCodeLine{00271                temprow = newrow;}
\DoxyCodeLine{00272             \}  \textcolor{comment}{/* done conditioning glyphs beyond double-\/width */}}
\DoxyCodeLine{00273             plane\_array[codept][i] = temprow;  \textcolor{comment}{/* store glyph bitmap for output */}}
\DoxyCodeLine{00274          \}  \textcolor{comment}{/* for each row */}}
\DoxyCodeLine{00275       \}  \textcolor{comment}{/* if 1 to 4 bytes per row/line */}}
\DoxyCodeLine{00276    \}  \textcolor{comment}{/* if this is the plane we are seeking */}}
\DoxyCodeLine{00277 }
\DoxyCodeLine{00278    \textcolor{keywordflow}{return};}
\DoxyCodeLine{00279 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=200pt]{unifontpic_8c_a0a030f2857f0d855b7ab0ccd8e968f1f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{unifontpic_8c_a3c04138a5bfe5d72780bb7e82a18e627}\label{unifontpic_8c_a3c04138a5bfe5d72780bb7e82a18e627}} 
\index{unifontpic.c@{unifontpic.c}!main@{main}}
\index{main@{main}!unifontpic.c@{unifontpic.c}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}



The main function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em argc} & The count of command line arguments. \\
\hline
\mbox{\texttt{ in}}  & {\em argv} & Pointer to array of command line arguments. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
This program exits with status EXIT\+\_\+\+SUCCESS. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{unifontpic_8c_source_l00087}{87}} of file \mbox{\hyperlink{unifontpic_8c_source}{unifontpic.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00088 \{}
\DoxyCodeLine{00089    \textcolor{comment}{/* Input line buffer */}}
\DoxyCodeLine{00090    \textcolor{keywordtype}{char} instring[\mbox{\hyperlink{unifont1per_8c_a2ff420a6c6a2d1effc47a81e37327985}{MAXSTRING}}];}
\DoxyCodeLine{00091 }
\DoxyCodeLine{00092    \textcolor{comment}{/* long and dpi are set from command-\/line options */}}
\DoxyCodeLine{00093    \textcolor{keywordtype}{int} wide=1; \textcolor{comment}{/* =1 for a 256x256 grid, =0 for a 16x4096 grid */}}
\DoxyCodeLine{00094    \textcolor{keywordtype}{int} dpi=96; \textcolor{comment}{/* change for 256x256 grid to fit paper if desired */}}
\DoxyCodeLine{00095    \textcolor{keywordtype}{int} tinynum=0; \textcolor{comment}{/* whether to use tiny labels for 256x256 grid */}}
\DoxyCodeLine{00096 }
\DoxyCodeLine{00097    \textcolor{keywordtype}{int} i, j; \textcolor{comment}{/* loop variables */}}
\DoxyCodeLine{00098 }
\DoxyCodeLine{00099    \textcolor{keywordtype}{int} plane=0;      \textcolor{comment}{/* Unicode plane, 0..17; Plane 0 is default */}}
\DoxyCodeLine{00100    \textcolor{comment}{/* 16 pixel rows for each of 65,536 glyphs in a Unicode plane */}}
\DoxyCodeLine{00101    \textcolor{keywordtype}{int} plane\_array[0x10000][16];}
\DoxyCodeLine{00102 }
\DoxyCodeLine{00103    \textcolor{keywordtype}{void} \mbox{\hyperlink{unifontpic_8c_a0a030f2857f0d855b7ab0ccd8e968f1f}{gethex}}();}
\DoxyCodeLine{00104    \textcolor{keywordtype}{void} \mbox{\hyperlink{unifontpic_8c_afd429d88175c59dae5c32e8c9aa7851d}{genlongbmp}}();}
\DoxyCodeLine{00105    \textcolor{keywordtype}{void} \mbox{\hyperlink{unifontpic_8c_a3931c7b44c00ffdb8925a3c837577677}{genwidebmp}}();}
\DoxyCodeLine{00106 }
\DoxyCodeLine{00107    \textcolor{keywordflow}{if} (argc > 1) \{}
\DoxyCodeLine{00108       \textcolor{keywordflow}{for} (i = 1; i < argc; i++) \{}
\DoxyCodeLine{00109          \textcolor{keywordflow}{if} (strncmp (argv[i],\textcolor{stringliteral}{"{}-\/l"{}},2) == 0) \{ \textcolor{comment}{/* long display */}}
\DoxyCodeLine{00110            wide = 0;}
\DoxyCodeLine{00111          \}}
\DoxyCodeLine{00112          \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (strncmp (argv[i],\textcolor{stringliteral}{"{}-\/d"{}},2) == 0) \{}
\DoxyCodeLine{00113             dpi = atoi (\&argv[i][2]); \textcolor{comment}{/* dots/inch specified on command line */}}
\DoxyCodeLine{00114          \}}
\DoxyCodeLine{00115          \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (strncmp (argv[i],\textcolor{stringliteral}{"{}-\/t"{}},2) == 0) \{}
\DoxyCodeLine{00116             tinynum = 1;}
\DoxyCodeLine{00117          \}}
\DoxyCodeLine{00118          \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (strncmp (argv[i],\textcolor{stringliteral}{"{}-\/P"{}},2) == 0) \{}
\DoxyCodeLine{00119             \textcolor{comment}{/* Get Unicode plane */}}
\DoxyCodeLine{00120             \textcolor{keywordflow}{for} (j = 2; argv[i][j] != \textcolor{charliteral}{'\(\backslash\)0'}; j++) \{}
\DoxyCodeLine{00121                \textcolor{keywordflow}{if} (argv[i][j] < \textcolor{charliteral}{'0'} || argv[i][j] > \textcolor{charliteral}{'9'}) \{}
\DoxyCodeLine{00122                   fprintf (stderr,}
\DoxyCodeLine{00123                            \textcolor{stringliteral}{"{}ERROR: Specify Unicode plane as decimal number.\(\backslash\)n\(\backslash\)n"{}});}
\DoxyCodeLine{00124                   exit (EXIT\_FAILURE);}
\DoxyCodeLine{00125                \}}
\DoxyCodeLine{00126             \}}
\DoxyCodeLine{00127             plane = atoi (\&argv[i][2]); \textcolor{comment}{/* Unicode plane, 0..17 */}}
\DoxyCodeLine{00128             \textcolor{keywordflow}{if} (plane < 0 || plane > 17) \{}
\DoxyCodeLine{00129                fprintf (stderr,}
\DoxyCodeLine{00130                         \textcolor{stringliteral}{"{}ERROR: Plane out of Unicode range [0,17].\(\backslash\)n\(\backslash\)n"{}});}
\DoxyCodeLine{00131                exit (EXIT\_FAILURE);}
\DoxyCodeLine{00132             \}}
\DoxyCodeLine{00133          \}}
\DoxyCodeLine{00134       \}}
\DoxyCodeLine{00135    \}}
\DoxyCodeLine{00136 }
\DoxyCodeLine{00137 }
\DoxyCodeLine{00138    \textcolor{comment}{/*}}
\DoxyCodeLine{00139 \textcolor{comment}{      Initialize the ASCII bitmap array for chart titles}}
\DoxyCodeLine{00140 \textcolor{comment}{   */}}
\DoxyCodeLine{00141    \textcolor{keywordflow}{for} (i = 0; i < 128; i++) \{}
\DoxyCodeLine{00142       \mbox{\hyperlink{unifontpic_8c_a0a030f2857f0d855b7ab0ccd8e968f1f}{gethex}} (\mbox{\hyperlink{unifontpic_8h_ad38c3dd5832ced1dc64c3093f359afcf}{ascii\_hex}}[i], plane\_array, 0); \textcolor{comment}{/* convert Unifont hexadecimal string to bitmap */}}
\DoxyCodeLine{00143       \textcolor{keywordflow}{for} (j = 0; j < 16; j++) \mbox{\hyperlink{unifontpic_8h_a593ebc374e9f30c90743f0fd48cc91df}{ascii\_bits}}[i][j] = plane\_array[i][j];}
\DoxyCodeLine{00144    \}}
\DoxyCodeLine{00145 }
\DoxyCodeLine{00146 }
\DoxyCodeLine{00147    \textcolor{comment}{/*}}
\DoxyCodeLine{00148 \textcolor{comment}{      Read in the Unifont hex file to render from standard input}}
\DoxyCodeLine{00149 \textcolor{comment}{   */}}
\DoxyCodeLine{00150    memset ((\textcolor{keywordtype}{void} *)plane\_array, 0, 0x10000 * 16 * \textcolor{keyword}{sizeof} (\textcolor{keywordtype}{int}));}
\DoxyCodeLine{00151    \textcolor{keywordflow}{while} (fgets (instring, \mbox{\hyperlink{unifont1per_8c_a2ff420a6c6a2d1effc47a81e37327985}{MAXSTRING}}, stdin) != NULL) \{}
\DoxyCodeLine{00152       \mbox{\hyperlink{unifontpic_8c_a0a030f2857f0d855b7ab0ccd8e968f1f}{gethex}} (instring, plane\_array, plane); \textcolor{comment}{/* read .hex input file and fill plane\_array with glyph data */}}
\DoxyCodeLine{00153    \}  \textcolor{comment}{/* while not EOF */}}
\DoxyCodeLine{00154 }
\DoxyCodeLine{00155 }
\DoxyCodeLine{00156    \textcolor{comment}{/*}}
\DoxyCodeLine{00157 \textcolor{comment}{      Write plane\_array glyph data to BMP file as wide or long bitmap.}}
\DoxyCodeLine{00158 \textcolor{comment}{   */}}
\DoxyCodeLine{00159    \textcolor{keywordflow}{if} (wide) \{}
\DoxyCodeLine{00160       \mbox{\hyperlink{unifontpic_8c_a3931c7b44c00ffdb8925a3c837577677}{genwidebmp}} (plane\_array, dpi, tinynum, plane);}
\DoxyCodeLine{00161    \}}
\DoxyCodeLine{00162    \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00163       \mbox{\hyperlink{unifontpic_8c_afd429d88175c59dae5c32e8c9aa7851d}{genlongbmp}} (plane\_array, dpi, tinynum, plane);}
\DoxyCodeLine{00164    \}}
\DoxyCodeLine{00165 }
\DoxyCodeLine{00166    exit (EXIT\_SUCCESS);}
\DoxyCodeLine{00167 \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=310pt]{unifontpic_8c_a3c04138a5bfe5d72780bb7e82a18e627_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{unifontpic_8c_af1fbb002e4787785de92e073ec46b787}\label{unifontpic_8c_af1fbb002e4787785de92e073ec46b787}} 
\index{unifontpic.c@{unifontpic.c}!output2@{output2}}
\index{output2@{output2}!unifontpic.c@{unifontpic.c}}
\doxysubsubsection{\texorpdfstring{output2()}{output2()}}
{\footnotesize\ttfamily void output2 (\begin{DoxyParamCaption}\item[{int}]{thisword }\end{DoxyParamCaption})}



Output a 2-\/byte integer in little-\/endian order. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em thisword} & The 2-\/byte integer to output as binary data. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{unifontpic_8c_source_l00194}{194}} of file \mbox{\hyperlink{unifontpic_8c_source}{unifontpic.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00195 \{}
\DoxyCodeLine{00196 }
\DoxyCodeLine{00197    putchar ( thisword       \& 0xFF);}
\DoxyCodeLine{00198    putchar ((thisword >> 8) \& 0xFF);}
\DoxyCodeLine{00199 }
\DoxyCodeLine{00200    \textcolor{keywordflow}{return};}
\DoxyCodeLine{00201 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=310pt]{unifontpic_8c_af1fbb002e4787785de92e073ec46b787_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}\label{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}} 
\index{unifontpic.c@{unifontpic.c}!output4@{output4}}
\index{output4@{output4}!unifontpic.c@{unifontpic.c}}
\doxysubsubsection{\texorpdfstring{output4()}{output4()}}
{\footnotesize\ttfamily void output4 (\begin{DoxyParamCaption}\item[{int}]{thisword }\end{DoxyParamCaption})}



Output a 4-\/byte integer in little-\/endian order. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em thisword} & The 4-\/byte integer to output as binary data. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{unifontpic_8c_source_l00176}{176}} of file \mbox{\hyperlink{unifontpic_8c_source}{unifontpic.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00177 \{}
\DoxyCodeLine{00178 }
\DoxyCodeLine{00179    putchar ( thisword        \& 0xFF);}
\DoxyCodeLine{00180    putchar ((thisword >>  8) \& 0xFF);}
\DoxyCodeLine{00181    putchar ((thisword >> 16) \& 0xFF);}
\DoxyCodeLine{00182    putchar ((thisword >> 24) \& 0xFF);}
\DoxyCodeLine{00183 }
\DoxyCodeLine{00184    \textcolor{keywordflow}{return};}
\DoxyCodeLine{00185 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=310pt]{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710_icgraph}
\end{center}
\end{figure}
