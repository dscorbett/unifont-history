\hypertarget{unifontpic_8c}{}\doxysection{src/unifontpic.c File Reference}
\label{unifontpic_8c}\index{src/unifontpic.c@{src/unifontpic.c}}


unifontpic -\/ See the \char`\"{}\+Big Picture\char`\"{}\+: the entire Unifont in one BMP bitmap  


{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include \char`\"{}unifontpic.\+h\char`\"{}}\newline
Include dependency graph for unifontpic.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=345pt]{unifontpic_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{unifontpic_8c_af314b4eee945c2791f7890f72f0623af}{HDR\+\_\+\+LEN}}~33
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{unifontpic_8c_a3c04138a5bfe5d72780bb7e82a18e627}{main}} (int argc, char $\ast$$\ast$argv)
\begin{DoxyCompactList}\small\item\em The main function. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (int thisword)
\begin{DoxyCompactList}\small\item\em Output a 4-\/byte integer in little-\/endian order. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{unifontpic_8c_af1fbb002e4787785de92e073ec46b787}{output2}} (int thisword)
\begin{DoxyCompactList}\small\item\em Output a 2-\/byte integer in little-\/endian order. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{unifontpic_8c_a0a030f2857f0d855b7ab0ccd8e968f1f}{gethex}} (char $\ast$instring, int plane\+\_\+array\mbox{[}0x10000\mbox{]}\mbox{[}16\mbox{]}, int plane)
\begin{DoxyCompactList}\small\item\em Read a Unifont .hex-\/format input file from stdin. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{unifontpic_8c_afd429d88175c59dae5c32e8c9aa7851d}{genlongbmp}} (int plane\+\_\+array\mbox{[}0x10000\mbox{]}\mbox{[}16\mbox{]}, int dpi, int tinynum, int plane)
\begin{DoxyCompactList}\small\item\em Generate the BMP output file in long format. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{unifontpic_8c_a3931c7b44c00ffdb8925a3c837577677}{genwidebmp}} (int plane\+\_\+array\mbox{[}0x10000\mbox{]}\mbox{[}16\mbox{]}, int dpi, int tinynum, int plane)
\begin{DoxyCompactList}\small\item\em Generate the BMP output file in wide format. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
unifontpic -\/ See the \char`\"{}\+Big Picture\char`\"{}\+: the entire Unifont in one BMP bitmap 

\begin{DoxyAuthor}{Author}
Paul Hardy, 2013
\end{DoxyAuthor}
\begin{DoxyCopyright}{Copyright}
Copyright (C) 2013, 2017 Paul Hardy 
\end{DoxyCopyright}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{unifontpic_8c_af314b4eee945c2791f7890f72f0623af}\label{unifontpic_8c_af314b4eee945c2791f7890f72f0623af}} 
\index{unifontpic.c@{unifontpic.c}!HDR\_LEN@{HDR\_LEN}}
\index{HDR\_LEN@{HDR\_LEN}!unifontpic.c@{unifontpic.c}}
\doxysubsubsection{\texorpdfstring{HDR\_LEN}{HDR\_LEN}}
{\footnotesize\ttfamily \#define HDR\+\_\+\+LEN~33}

Define length of header string for top of chart. 

Definition at line 67 of file unifontpic.\+c.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{unifontpic_8c_afd429d88175c59dae5c32e8c9aa7851d}\label{unifontpic_8c_afd429d88175c59dae5c32e8c9aa7851d}} 
\index{unifontpic.c@{unifontpic.c}!genlongbmp@{genlongbmp}}
\index{genlongbmp@{genlongbmp}!unifontpic.c@{unifontpic.c}}
\doxysubsubsection{\texorpdfstring{genlongbmp()}{genlongbmp()}}
{\footnotesize\ttfamily void genlongbmp (\begin{DoxyParamCaption}\item[{int}]{plane\+\_\+array\mbox{[}0x10000\mbox{]}\mbox{[}16\mbox{]},  }\item[{int}]{dpi,  }\item[{int}]{tinynum,  }\item[{int}]{plane }\end{DoxyParamCaption})}



Generate the BMP output file in long format. 

This function generates the BMP output file from a bitmap parameter. This is a long bitmap, 16 glyphs wide by 4,096 glyphs tall.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em plane\+\_\+array} & The array of glyph bitmaps for a plane. \\
\hline
\mbox{\texttt{ in}}  & {\em dpi} & Dots per inch, for encoding in the BMP output file header. \\
\hline
\mbox{\texttt{ in}}  & {\em tinynum} & Whether to generate tiny numbers in wide grid (unused). \\
\hline
\mbox{\texttt{ in}}  & {\em plane} & The Unicode plane, 0..17. \\
\hline
\end{DoxyParams}


Definition at line 294 of file unifontpic.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{295 \{}
\DoxyCodeLine{296 }
\DoxyCodeLine{297    \textcolor{keywordtype}{char} header\_string[\mbox{\hyperlink{unifontpic_8c_af314b4eee945c2791f7890f72f0623af}{HDR\_LEN}}]; \textcolor{comment}{/* centered header             */}}
\DoxyCodeLine{298    \textcolor{keywordtype}{char} raw\_header[\mbox{\hyperlink{unifontpic_8c_af314b4eee945c2791f7890f72f0623af}{HDR\_LEN}}];    \textcolor{comment}{/* left-\/aligned header         */}}
\DoxyCodeLine{299    \textcolor{keywordtype}{int} header[16][16];     \textcolor{comment}{/* header row, for chart title */}}
\DoxyCodeLine{300    \textcolor{keywordtype}{int} hdrlen;             \textcolor{comment}{/* length of HEADER\_STRING     */}}
\DoxyCodeLine{301    \textcolor{keywordtype}{int} startcol;           \textcolor{comment}{/* column to start printing header, for centering */}}
\DoxyCodeLine{302 }
\DoxyCodeLine{303    \textcolor{keywordtype}{unsigned} leftcol[0x1000][16]; \textcolor{comment}{/* code point legend on left side of chart */}}
\DoxyCodeLine{304    \textcolor{keywordtype}{int} d1, d2, d3, d4;           \textcolor{comment}{/* digits for filling leftcol[][] legend   */}}
\DoxyCodeLine{305    \textcolor{keywordtype}{int} codept;                   \textcolor{comment}{/* current starting code point for legend  */}}
\DoxyCodeLine{306    \textcolor{keywordtype}{int} thisrow;                  \textcolor{comment}{/* glyph row currently being rendered      */}}
\DoxyCodeLine{307    \textcolor{keywordtype}{unsigned} toprow[16][16];      \textcolor{comment}{/* code point legend on top of chart       */}}
\DoxyCodeLine{308    \textcolor{keywordtype}{int} digitrow;       \textcolor{comment}{/* row we're in (0..4) for the above hexdigit digits */}}
\DoxyCodeLine{309 }
\DoxyCodeLine{310    \textcolor{comment}{/*}}
\DoxyCodeLine{311 \textcolor{comment}{      DataOffset = BMP Header bytes + InfoHeader bytes + ColorTable bytes.}}
\DoxyCodeLine{312 \textcolor{comment}{   */}}
\DoxyCodeLine{313    \textcolor{keywordtype}{int} DataOffset = 14 + 40 + 8; \textcolor{comment}{/* fixed size for monochrome BMP */}}
\DoxyCodeLine{314    \textcolor{keywordtype}{int} ImageSize;}
\DoxyCodeLine{315    \textcolor{keywordtype}{int} FileSize;}
\DoxyCodeLine{316    \textcolor{keywordtype}{int} Width, Height; \textcolor{comment}{/* bitmap image width and height in pixels */}}
\DoxyCodeLine{317    \textcolor{keywordtype}{int} ppm;     \textcolor{comment}{/* integer pixels per meter */}}
\DoxyCodeLine{318 }
\DoxyCodeLine{319    \textcolor{keywordtype}{int} i, j, k;}
\DoxyCodeLine{320 }
\DoxyCodeLine{321    \textcolor{keywordtype}{unsigned} bytesout;}
\DoxyCodeLine{322 }
\DoxyCodeLine{323    \textcolor{keywordtype}{void} \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}}(\textcolor{keywordtype}{int}), \mbox{\hyperlink{unifontpic_8c_af1fbb002e4787785de92e073ec46b787}{output2}}(\textcolor{keywordtype}{int});}
\DoxyCodeLine{324 }
\DoxyCodeLine{325    \textcolor{comment}{/*}}
\DoxyCodeLine{326 \textcolor{comment}{      Image width and height, in pixels.}}
\DoxyCodeLine{327 \textcolor{comment}{}}
\DoxyCodeLine{328 \textcolor{comment}{         N.B.: Width must be an even multiple of 32 pixels, or 4 bytes.}}
\DoxyCodeLine{329 \textcolor{comment}{   */}}
\DoxyCodeLine{330    Width  =   18 * 16;  \textcolor{comment}{/* (2 legend +   16 glyphs) * 16 pixels/glyph */}}
\DoxyCodeLine{331    Height = 4099 * 16;  \textcolor{comment}{/* (1 header + 4096 glyphs) * 16 rows/glyph   */}}
\DoxyCodeLine{332 }
\DoxyCodeLine{333    ImageSize = Height * (Width / 8); \textcolor{comment}{/* in bytes, calculated from pixels */}}
\DoxyCodeLine{334 }
\DoxyCodeLine{335    FileSize = DataOffset + ImageSize;}
\DoxyCodeLine{336 }
\DoxyCodeLine{337    \textcolor{comment}{/* convert dots/inch to pixels/meter */}}
\DoxyCodeLine{338    \textcolor{keywordflow}{if} (dpi == 0) dpi = 96;}
\DoxyCodeLine{339    ppm = (int)((\textcolor{keywordtype}{double})dpi * 100.0 / 2.54 + 0.5);}
\DoxyCodeLine{340 }
\DoxyCodeLine{341    \textcolor{comment}{/*}}
\DoxyCodeLine{342 \textcolor{comment}{      Generate the BMP Header}}
\DoxyCodeLine{343 \textcolor{comment}{   */}}
\DoxyCodeLine{344    putchar (\textcolor{charliteral}{'B'});}
\DoxyCodeLine{345    putchar (\textcolor{charliteral}{'M'});}
\DoxyCodeLine{346 }
\DoxyCodeLine{347    \textcolor{comment}{/*}}
\DoxyCodeLine{348 \textcolor{comment}{      Calculate file size:}}
\DoxyCodeLine{349 \textcolor{comment}{}}
\DoxyCodeLine{350 \textcolor{comment}{         BMP Header + InfoHeader + Color Table + Raster Data}}
\DoxyCodeLine{351 \textcolor{comment}{   */}}
\DoxyCodeLine{352    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (FileSize);  \textcolor{comment}{/* FileSize */}}
\DoxyCodeLine{353    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (0x0000); \textcolor{comment}{/* reserved */}}
\DoxyCodeLine{354 }
\DoxyCodeLine{355    \textcolor{comment}{/* Calculate DataOffset */}}
\DoxyCodeLine{356    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (DataOffset);}
\DoxyCodeLine{357 }
\DoxyCodeLine{358    \textcolor{comment}{/*}}
\DoxyCodeLine{359 \textcolor{comment}{      InfoHeader}}
\DoxyCodeLine{360 \textcolor{comment}{   */}}
\DoxyCodeLine{361    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (40);         \textcolor{comment}{/* Size of InfoHeader                       */}}
\DoxyCodeLine{362    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (Width);      \textcolor{comment}{/* Width of bitmap in pixels                */}}
\DoxyCodeLine{363    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (Height);     \textcolor{comment}{/* Height of bitmap in pixels               */}}
\DoxyCodeLine{364    \mbox{\hyperlink{unifontpic_8c_af1fbb002e4787785de92e073ec46b787}{output2}} (1);          \textcolor{comment}{/* Planes (1 plane)                         */}}
\DoxyCodeLine{365    \mbox{\hyperlink{unifontpic_8c_af1fbb002e4787785de92e073ec46b787}{output2}} (1);          \textcolor{comment}{/* BitCount (1 = monochrome)                */}}
\DoxyCodeLine{366    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (0);          \textcolor{comment}{/* Compression (0 = none)                   */}}
\DoxyCodeLine{367    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (ImageSize);  \textcolor{comment}{/* ImageSize, in bytes                      */}}
\DoxyCodeLine{368    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (ppm);        \textcolor{comment}{/* XpixelsPerM (96 dpi = 3780 pixels/meter) */}}
\DoxyCodeLine{369    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (ppm);        \textcolor{comment}{/* YpixelsPerM (96 dpi = 3780 pixels/meter) */}}
\DoxyCodeLine{370    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (2);          \textcolor{comment}{/* ColorsUsed (= 2)                         */}}
\DoxyCodeLine{371    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (2);          \textcolor{comment}{/* ColorsImportant (= 2)                    */}}
\DoxyCodeLine{372    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (0x00000000); \textcolor{comment}{/* black (reserved, B, G, R)                */}}
\DoxyCodeLine{373    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (0x00FFFFFF); \textcolor{comment}{/* white (reserved, B, G, R)                */}}
\DoxyCodeLine{374 }
\DoxyCodeLine{375    \textcolor{comment}{/*}}
\DoxyCodeLine{376 \textcolor{comment}{      Create header row bits.}}
\DoxyCodeLine{377 \textcolor{comment}{   */}}
\DoxyCodeLine{378    snprintf (raw\_header, \mbox{\hyperlink{unifontpic_8c_af314b4eee945c2791f7890f72f0623af}{HDR\_LEN}}, \textcolor{stringliteral}{"{}\%s Plane \%d"{}}, \mbox{\hyperlink{unifontpic_8h_a418ed439fafbc678a74cb266ef2919d4}{HEADER\_STRING}}, plane);}
\DoxyCodeLine{379    memset ((\textcolor{keywordtype}{void} *)header, 0, 16 * 16 * \textcolor{keyword}{sizeof} (\textcolor{keywordtype}{int})); \textcolor{comment}{/* fill with white */}}
\DoxyCodeLine{380    memset ((\textcolor{keywordtype}{void} *)header\_string, \textcolor{charliteral}{' '}, 32 * \textcolor{keyword}{sizeof} (\textcolor{keywordtype}{char})); \textcolor{comment}{/* 32 spaces */}}
\DoxyCodeLine{381    header\_string[32] = \textcolor{charliteral}{'\(\backslash\)0'};  \textcolor{comment}{/* null-\/terminated */}}
\DoxyCodeLine{382 }
\DoxyCodeLine{383    hdrlen = strlen (raw\_header);}
\DoxyCodeLine{384    \textcolor{keywordflow}{if} (hdrlen > 32) hdrlen = 32;        \textcolor{comment}{/* only 32 columns to print header */}}
\DoxyCodeLine{385    startcol = 16 -\/ ((hdrlen + 1) >> 1); \textcolor{comment}{/* to center header                */}}
\DoxyCodeLine{386    \textcolor{comment}{/* center up to 32 chars */}}
\DoxyCodeLine{387    memcpy (\&header\_string[startcol], raw\_header, hdrlen);}
\DoxyCodeLine{388 }
\DoxyCodeLine{389    \textcolor{comment}{/* Copy each letter's bitmap from the plane\_array[][] we constructed. */}}
\DoxyCodeLine{390    \textcolor{comment}{/* Each glyph must be single-\/width, to fit two glyphs in 16 pixels */}}
\DoxyCodeLine{391    \textcolor{keywordflow}{for} (j = 0; j < 16; j++) \{}
\DoxyCodeLine{392       \textcolor{keywordflow}{for} (i = 0; i < 16; i++) \{}
\DoxyCodeLine{393          header[i][j] =}
\DoxyCodeLine{394             (\mbox{\hyperlink{unifontpic_8h_a593ebc374e9f30c90743f0fd48cc91df}{ascii\_bits}}[header\_string[j+j  ] \& 0x7F][i] \& 0xFF00) |}
\DoxyCodeLine{395             (\mbox{\hyperlink{unifontpic_8h_a593ebc374e9f30c90743f0fd48cc91df}{ascii\_bits}}[header\_string[j+j+1] \& 0x7F][i] >> 8);}
\DoxyCodeLine{396       \}}
\DoxyCodeLine{397    \}}
\DoxyCodeLine{398 }
\DoxyCodeLine{399    \textcolor{comment}{/*}}
\DoxyCodeLine{400 \textcolor{comment}{      Create the left column legend.}}
\DoxyCodeLine{401 \textcolor{comment}{   */}}
\DoxyCodeLine{402    memset ((\textcolor{keywordtype}{void} *)leftcol, 0, 4096 * 16 * \textcolor{keyword}{sizeof} (\textcolor{keywordtype}{unsigned}));}
\DoxyCodeLine{403 }
\DoxyCodeLine{404    \textcolor{keywordflow}{for} (codept = 0x0000; codept < 0x10000; codept += 0x10) \{}
\DoxyCodeLine{405       d1 = (codept >> 12) \& 0xF; \textcolor{comment}{/* most significant hex digit */}}
\DoxyCodeLine{406       d2 = (codept >>  8) \& 0xF;}
\DoxyCodeLine{407       d3 = (codept >>  4) \& 0xF;}
\DoxyCodeLine{408 }
\DoxyCodeLine{409       thisrow = codept >> 4; \textcolor{comment}{/* rows of 16 glyphs */}}
\DoxyCodeLine{410 }
\DoxyCodeLine{411       \textcolor{comment}{/* fill in first and second digits */}}
\DoxyCodeLine{412       \textcolor{keywordflow}{for} (digitrow = 0; digitrow < 5; digitrow++) \{}
\DoxyCodeLine{413          leftcol[thisrow][2 + digitrow] =}
\DoxyCodeLine{414             (\mbox{\hyperlink{unibmp2hex_8c_a8e50648544568f9274781c2c90acdd78}{hexdigit}}[d1][digitrow] << 10) |}
\DoxyCodeLine{415             (\mbox{\hyperlink{unibmp2hex_8c_a8e50648544568f9274781c2c90acdd78}{hexdigit}}[d2][digitrow] <<  4);}
\DoxyCodeLine{416       \}}
\DoxyCodeLine{417 }
\DoxyCodeLine{418       \textcolor{comment}{/* fill in third digit */}}
\DoxyCodeLine{419       \textcolor{keywordflow}{for} (digitrow = 0; digitrow < 5; digitrow++) \{}
\DoxyCodeLine{420          leftcol[thisrow][9 + digitrow] = \mbox{\hyperlink{unibmp2hex_8c_a8e50648544568f9274781c2c90acdd78}{hexdigit}}[d3][digitrow] << 10;}
\DoxyCodeLine{421       \}}
\DoxyCodeLine{422       leftcol[thisrow][9 + 4] |= 0xF << 4; \textcolor{comment}{/* underscore as 4th digit */}}
\DoxyCodeLine{423 }
\DoxyCodeLine{424       \textcolor{keywordflow}{for} (i = 0; i < 15; i ++) \{}
\DoxyCodeLine{425          leftcol[thisrow][i] |= 0x00000002;      \textcolor{comment}{/* right border */}}
\DoxyCodeLine{426       \}}
\DoxyCodeLine{427 }
\DoxyCodeLine{428       leftcol[thisrow][15] = 0x0000FFFE;        \textcolor{comment}{/* bottom border */}}
\DoxyCodeLine{429 }
\DoxyCodeLine{430       \textcolor{keywordflow}{if} (d3 == 0xF) \{                     \textcolor{comment}{/* 256-\/point boundary */}}
\DoxyCodeLine{431          leftcol[thisrow][15] |= 0x00FF0000;  \textcolor{comment}{/* longer tic mark */}}
\DoxyCodeLine{432       \}}
\DoxyCodeLine{433 }
\DoxyCodeLine{434       \textcolor{keywordflow}{if} ((thisrow \% 0x40) == 0x3F) \{    \textcolor{comment}{/* 1024-\/point boundary */}}
\DoxyCodeLine{435          leftcol[thisrow][15] |= 0xFFFF0000; \textcolor{comment}{/* longest tic mark */}}
\DoxyCodeLine{436       \}}
\DoxyCodeLine{437    \}}
\DoxyCodeLine{438 }
\DoxyCodeLine{439    \textcolor{comment}{/*}}
\DoxyCodeLine{440 \textcolor{comment}{      Create the top row legend.}}
\DoxyCodeLine{441 \textcolor{comment}{   */}}
\DoxyCodeLine{442    memset ((\textcolor{keywordtype}{void} *)toprow, 0, 16 * 16 * \textcolor{keyword}{sizeof} (\textcolor{keywordtype}{unsigned}));}
\DoxyCodeLine{443 }
\DoxyCodeLine{444    \textcolor{keywordflow}{for} (codept = 0x0; codept <= 0xF; codept++) \{}
\DoxyCodeLine{445       d1 = (codept >> 12) \& 0xF; \textcolor{comment}{/* most significant hex digit */}}
\DoxyCodeLine{446       d2 = (codept >>  8) \& 0xF;}
\DoxyCodeLine{447       d3 = (codept >>  4) \& 0xF;}
\DoxyCodeLine{448       d4 =  codept        \& 0xF; \textcolor{comment}{/* least significant hex digit */}}
\DoxyCodeLine{449 }
\DoxyCodeLine{450       \textcolor{comment}{/* fill in last digit */}}
\DoxyCodeLine{451       \textcolor{keywordflow}{for} (digitrow = 0; digitrow < 5; digitrow++) \{}
\DoxyCodeLine{452          toprow[6 + digitrow][codept] = \mbox{\hyperlink{unibmp2hex_8c_a8e50648544568f9274781c2c90acdd78}{hexdigit}}[d4][digitrow] << 6;}
\DoxyCodeLine{453       \}}
\DoxyCodeLine{454    \}}
\DoxyCodeLine{455 }
\DoxyCodeLine{456    \textcolor{keywordflow}{for} (j = 0; j < 16; j++) \{}
\DoxyCodeLine{457       \textcolor{comment}{/* force bottom pixel row to be white, for separation from glyphs */}}
\DoxyCodeLine{458       toprow[15][j] = 0x0000;}
\DoxyCodeLine{459    \}}
\DoxyCodeLine{460 }
\DoxyCodeLine{461    \textcolor{comment}{/* 1 pixel row with left-\/hand legend line */}}
\DoxyCodeLine{462    \textcolor{keywordflow}{for} (j = 0; j < 16; j++) \{}
\DoxyCodeLine{463       toprow[14][j] |= 0xFFFF;}
\DoxyCodeLine{464    \}}
\DoxyCodeLine{465 }
\DoxyCodeLine{466    \textcolor{comment}{/* 14 rows with line on left to fill out this character row */}}
\DoxyCodeLine{467    \textcolor{keywordflow}{for} (i = 13; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{468       \textcolor{keywordflow}{for} (j = 0; j < 16; j++) \{}
\DoxyCodeLine{469          toprow[i][j] |= 0x0001;}
\DoxyCodeLine{470       \}}
\DoxyCodeLine{471    \}}
\DoxyCodeLine{472 }
\DoxyCodeLine{473    \textcolor{comment}{/*}}
\DoxyCodeLine{474 \textcolor{comment}{      Now write the raster image.}}
\DoxyCodeLine{475 \textcolor{comment}{}}
\DoxyCodeLine{476 \textcolor{comment}{      XOR each byte with 0xFF because black = 0, white = 1 in BMP.}}
\DoxyCodeLine{477 \textcolor{comment}{   */}}
\DoxyCodeLine{478 }
\DoxyCodeLine{479    \textcolor{comment}{/* Write the glyphs, bottom-\/up, left-\/to-\/right, in rows of 16 (i.e., 0x10) */}}
\DoxyCodeLine{480    \textcolor{keywordflow}{for} (i = 0xFFF0; i >= 0; i -\/= 0x10) \{}
\DoxyCodeLine{481       thisrow = i >> 4; \textcolor{comment}{/* 16 glyphs per row */}}
\DoxyCodeLine{482       \textcolor{keywordflow}{for} (j = 15; j >= 0; j-\/-\/) \{}
\DoxyCodeLine{483          \textcolor{comment}{/* left-\/hand legend */}}
\DoxyCodeLine{484          putchar ((\string~leftcol[thisrow][j] >> 24) \& 0xFF);}
\DoxyCodeLine{485          putchar ((\string~leftcol[thisrow][j] >> 16) \& 0xFF);}
\DoxyCodeLine{486          putchar ((\string~leftcol[thisrow][j] >>  8) \& 0xFF);}
\DoxyCodeLine{487          putchar ( \string~leftcol[thisrow][j]        \& 0xFF);}
\DoxyCodeLine{488          \textcolor{comment}{/* Unifont glyph */}}
\DoxyCodeLine{489          \textcolor{keywordflow}{for} (k = 0; k < 16; k++) \{}
\DoxyCodeLine{490             bytesout = \string~plane\_array[i+k][j] \& 0xFFFF;}
\DoxyCodeLine{491             putchar ((bytesout >> 8) \& 0xFF);}
\DoxyCodeLine{492             putchar ( bytesout       \& 0xFF);}
\DoxyCodeLine{493          \}}
\DoxyCodeLine{494       \}}
\DoxyCodeLine{495    \}}
\DoxyCodeLine{496 }
\DoxyCodeLine{497    \textcolor{comment}{/*}}
\DoxyCodeLine{498 \textcolor{comment}{      Write the top legend.}}
\DoxyCodeLine{499 \textcolor{comment}{   */}}
\DoxyCodeLine{500    \textcolor{comment}{/* i == 15: bottom pixel row of header is output here */}}
\DoxyCodeLine{501    \textcolor{comment}{/* left-\/hand legend: solid black line except for right-\/most pixel */}}
\DoxyCodeLine{502    putchar (0x00);}
\DoxyCodeLine{503    putchar (0x00);}
\DoxyCodeLine{504    putchar (0x00);}
\DoxyCodeLine{505    putchar (0x01);}
\DoxyCodeLine{506    \textcolor{keywordflow}{for} (j = 0; j < 16; j++) \{}
\DoxyCodeLine{507       putchar ((\string~toprow[15][j] >> 8) \& 0xFF);}
\DoxyCodeLine{508       putchar ( \string~toprow[15][j]       \& 0xFF);}
\DoxyCodeLine{509    \}}
\DoxyCodeLine{510 }
\DoxyCodeLine{511    putchar (0xFF);}
\DoxyCodeLine{512    putchar (0xFF);}
\DoxyCodeLine{513    putchar (0xFF);}
\DoxyCodeLine{514    putchar (0xFC);}
\DoxyCodeLine{515    \textcolor{keywordflow}{for} (j = 0; j < 16; j++) \{}
\DoxyCodeLine{516       putchar ((\string~toprow[14][j] >> 8) \& 0xFF);}
\DoxyCodeLine{517       putchar ( \string~toprow[14][j]       \& 0xFF);}
\DoxyCodeLine{518    \}}
\DoxyCodeLine{519 }
\DoxyCodeLine{520    \textcolor{keywordflow}{for} (i = 13; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{521       putchar (0xFF);}
\DoxyCodeLine{522       putchar (0xFF);}
\DoxyCodeLine{523       putchar (0xFF);}
\DoxyCodeLine{524       putchar (0xFD);}
\DoxyCodeLine{525       \textcolor{keywordflow}{for} (j = 0; j < 16; j++) \{}
\DoxyCodeLine{526          putchar ((\string~toprow[i][j] >> 8) \& 0xFF);}
\DoxyCodeLine{527          putchar ( \string~toprow[i][j]       \& 0xFF);}
\DoxyCodeLine{528       \}}
\DoxyCodeLine{529    \}}
\DoxyCodeLine{530 }
\DoxyCodeLine{531    \textcolor{comment}{/*}}
\DoxyCodeLine{532 \textcolor{comment}{      Write the header.}}
\DoxyCodeLine{533 \textcolor{comment}{   */}}
\DoxyCodeLine{534 }
\DoxyCodeLine{535    \textcolor{comment}{/* 7 completely white rows */}}
\DoxyCodeLine{536    \textcolor{keywordflow}{for} (i = 7; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{537       \textcolor{keywordflow}{for} (j = 0; j < 18; j++) \{}
\DoxyCodeLine{538          putchar (0xFF);}
\DoxyCodeLine{539          putchar (0xFF);}
\DoxyCodeLine{540       \}}
\DoxyCodeLine{541    \}}
\DoxyCodeLine{542 }
\DoxyCodeLine{543    \textcolor{keywordflow}{for} (i = 15; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{544       \textcolor{comment}{/* left-\/hand legend */}}
\DoxyCodeLine{545       putchar (0xFF);}
\DoxyCodeLine{546       putchar (0xFF);}
\DoxyCodeLine{547       putchar (0xFF);}
\DoxyCodeLine{548       putchar (0xFF);}
\DoxyCodeLine{549       \textcolor{comment}{/* header glyph */}}
\DoxyCodeLine{550       \textcolor{keywordflow}{for} (j = 0; j < 16; j++) \{}
\DoxyCodeLine{551          bytesout = \string~header[i][j] \& 0xFFFF;}
\DoxyCodeLine{552          putchar ((bytesout >> 8) \& 0xFF);}
\DoxyCodeLine{553          putchar ( bytesout       \& 0xFF);}
\DoxyCodeLine{554       \}}
\DoxyCodeLine{555    \}}
\DoxyCodeLine{556 }
\DoxyCodeLine{557    \textcolor{comment}{/* 8 completely white rows at very top */}}
\DoxyCodeLine{558    \textcolor{keywordflow}{for} (i = 7; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{559       \textcolor{keywordflow}{for} (j = 0; j < 18; j++) \{}
\DoxyCodeLine{560       putchar (0xFF);}
\DoxyCodeLine{561       putchar (0xFF);}
\DoxyCodeLine{562       \}}
\DoxyCodeLine{563    \}}
\DoxyCodeLine{564 }
\DoxyCodeLine{565    \textcolor{keywordflow}{return};}
\DoxyCodeLine{566 \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=234pt]{unifontpic_8c_afd429d88175c59dae5c32e8c9aa7851d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=223pt]{unifontpic_8c_afd429d88175c59dae5c32e8c9aa7851d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{unifontpic_8c_a3931c7b44c00ffdb8925a3c837577677}\label{unifontpic_8c_a3931c7b44c00ffdb8925a3c837577677}} 
\index{unifontpic.c@{unifontpic.c}!genwidebmp@{genwidebmp}}
\index{genwidebmp@{genwidebmp}!unifontpic.c@{unifontpic.c}}
\doxysubsubsection{\texorpdfstring{genwidebmp()}{genwidebmp()}}
{\footnotesize\ttfamily void genwidebmp (\begin{DoxyParamCaption}\item[{int}]{plane\+\_\+array\mbox{[}0x10000\mbox{]}\mbox{[}16\mbox{]},  }\item[{int}]{dpi,  }\item[{int}]{tinynum,  }\item[{int}]{plane }\end{DoxyParamCaption})}



Generate the BMP output file in wide format. 

This function generates the BMP output file from a bitmap parameter. This is a wide bitmap, 256 glyphs wide by 256 glyphs tall.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em plane\+\_\+array} & The array of glyph bitmaps for a plane. \\
\hline
\mbox{\texttt{ in}}  & {\em dpi} & Dots per inch, for encoding in the BMP output file header. \\
\hline
\mbox{\texttt{ in}}  & {\em tinynum} & Whether to generate tiny numbers in 256x256 grid. \\
\hline
\mbox{\texttt{ in}}  & {\em plane} & The Unicode plane, 0..17. \\
\hline
\end{DoxyParams}


Definition at line 581 of file unifontpic.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{582 \{}
\DoxyCodeLine{583 }
\DoxyCodeLine{584    \textcolor{keywordtype}{char} header\_string[257];}
\DoxyCodeLine{585    \textcolor{keywordtype}{char} raw\_header[\mbox{\hyperlink{unifontpic_8c_af314b4eee945c2791f7890f72f0623af}{HDR\_LEN}}];}
\DoxyCodeLine{586    \textcolor{keywordtype}{int} header[16][256]; \textcolor{comment}{/* header row, for chart title */}}
\DoxyCodeLine{587    \textcolor{keywordtype}{int} hdrlen;         \textcolor{comment}{/* length of HEADER\_STRING */}}
\DoxyCodeLine{588    \textcolor{keywordtype}{int} startcol;       \textcolor{comment}{/* column to start printing header, for centering */}}
\DoxyCodeLine{589 }
\DoxyCodeLine{590    \textcolor{keywordtype}{unsigned} leftcol[0x100][16]; \textcolor{comment}{/* code point legend on left side of chart */}}
\DoxyCodeLine{591    \textcolor{keywordtype}{int} d1, d2, d3, d4;          \textcolor{comment}{/* digits for filling leftcol[][] legend   */}}
\DoxyCodeLine{592    \textcolor{keywordtype}{int} codept;                  \textcolor{comment}{/* current starting code point for legend  */}}
\DoxyCodeLine{593    \textcolor{keywordtype}{int} thisrow;                 \textcolor{comment}{/* glyph row currently being rendered      */}}
\DoxyCodeLine{594    \textcolor{keywordtype}{unsigned} toprow[32][256];    \textcolor{comment}{/* code point legend on top of chart       */}}
\DoxyCodeLine{595    \textcolor{keywordtype}{int} digitrow;      \textcolor{comment}{/* row we're in (0..4) for the above hexdigit digits */}}
\DoxyCodeLine{596    \textcolor{keywordtype}{int} hexalpha1, hexalpha2;    \textcolor{comment}{/* to convert hex digits to ASCII          */}}
\DoxyCodeLine{597 }
\DoxyCodeLine{598    \textcolor{comment}{/*}}
\DoxyCodeLine{599 \textcolor{comment}{      DataOffset = BMP Header bytes + InfoHeader bytes + ColorTable bytes.}}
\DoxyCodeLine{600 \textcolor{comment}{   */}}
\DoxyCodeLine{601    \textcolor{keywordtype}{int} DataOffset = 14 + 40 + 8; \textcolor{comment}{/* fixed size for monochrome BMP */}}
\DoxyCodeLine{602    \textcolor{keywordtype}{int} ImageSize;}
\DoxyCodeLine{603    \textcolor{keywordtype}{int} FileSize;}
\DoxyCodeLine{604    \textcolor{keywordtype}{int} Width, Height; \textcolor{comment}{/* bitmap image width and height in pixels */}}
\DoxyCodeLine{605    \textcolor{keywordtype}{int} ppm;     \textcolor{comment}{/* integer pixels per meter */}}
\DoxyCodeLine{606 }
\DoxyCodeLine{607    \textcolor{keywordtype}{int} i, j, k;}
\DoxyCodeLine{608 }
\DoxyCodeLine{609    \textcolor{keywordtype}{unsigned} bytesout;}
\DoxyCodeLine{610 }
\DoxyCodeLine{611    \textcolor{keywordtype}{void} \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}}(\textcolor{keywordtype}{int}), \mbox{\hyperlink{unifontpic_8c_af1fbb002e4787785de92e073ec46b787}{output2}}(\textcolor{keywordtype}{int});}
\DoxyCodeLine{612 }
\DoxyCodeLine{613    \textcolor{comment}{/*}}
\DoxyCodeLine{614 \textcolor{comment}{      Image width and height, in pixels.}}
\DoxyCodeLine{615 \textcolor{comment}{}}
\DoxyCodeLine{616 \textcolor{comment}{         N.B.: Width must be an even multiple of 32 pixels, or 4 bytes.}}
\DoxyCodeLine{617 \textcolor{comment}{   */}}
\DoxyCodeLine{618    Width  = 258 * 16;  \textcolor{comment}{/* (           2 legend + 256 glyphs) * 16 pixels/glyph */}}
\DoxyCodeLine{619    Height = 260 * 16;  \textcolor{comment}{/* (2 header + 2 legend + 256 glyphs) * 16 rows/glyph   */}}
\DoxyCodeLine{620 }
\DoxyCodeLine{621    ImageSize = Height * (Width / 8); \textcolor{comment}{/* in bytes, calculated from pixels */}}
\DoxyCodeLine{622 }
\DoxyCodeLine{623    FileSize = DataOffset + ImageSize;}
\DoxyCodeLine{624 }
\DoxyCodeLine{625    \textcolor{comment}{/* convert dots/inch to pixels/meter */}}
\DoxyCodeLine{626    \textcolor{keywordflow}{if} (dpi == 0) dpi = 96;}
\DoxyCodeLine{627    ppm = (int)((\textcolor{keywordtype}{double})dpi * 100.0 / 2.54 + 0.5);}
\DoxyCodeLine{628 }
\DoxyCodeLine{629    \textcolor{comment}{/*}}
\DoxyCodeLine{630 \textcolor{comment}{      Generate the BMP Header}}
\DoxyCodeLine{631 \textcolor{comment}{   */}}
\DoxyCodeLine{632    putchar (\textcolor{charliteral}{'B'});}
\DoxyCodeLine{633    putchar (\textcolor{charliteral}{'M'});}
\DoxyCodeLine{634    \textcolor{comment}{/*}}
\DoxyCodeLine{635 \textcolor{comment}{      Calculate file size:}}
\DoxyCodeLine{636 \textcolor{comment}{}}
\DoxyCodeLine{637 \textcolor{comment}{         BMP Header + InfoHeader + Color Table + Raster Data}}
\DoxyCodeLine{638 \textcolor{comment}{   */}}
\DoxyCodeLine{639    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (FileSize);  \textcolor{comment}{/* FileSize */}}
\DoxyCodeLine{640    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (0x0000); \textcolor{comment}{/* reserved */}}
\DoxyCodeLine{641    \textcolor{comment}{/* Calculate DataOffset */}}
\DoxyCodeLine{642    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (DataOffset);}
\DoxyCodeLine{643 }
\DoxyCodeLine{644    \textcolor{comment}{/*}}
\DoxyCodeLine{645 \textcolor{comment}{      InfoHeader}}
\DoxyCodeLine{646 \textcolor{comment}{   */}}
\DoxyCodeLine{647    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (40);         \textcolor{comment}{/* Size of InfoHeader                       */}}
\DoxyCodeLine{648    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (Width);      \textcolor{comment}{/* Width of bitmap in pixels                */}}
\DoxyCodeLine{649    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (Height);     \textcolor{comment}{/* Height of bitmap in pixels               */}}
\DoxyCodeLine{650    \mbox{\hyperlink{unifontpic_8c_af1fbb002e4787785de92e073ec46b787}{output2}} (1);          \textcolor{comment}{/* Planes (1 plane)                         */}}
\DoxyCodeLine{651    \mbox{\hyperlink{unifontpic_8c_af1fbb002e4787785de92e073ec46b787}{output2}} (1);          \textcolor{comment}{/* BitCount (1 = monochrome)                */}}
\DoxyCodeLine{652    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (0);          \textcolor{comment}{/* Compression (0 = none)                   */}}
\DoxyCodeLine{653    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (ImageSize);  \textcolor{comment}{/* ImageSize, in bytes                      */}}
\DoxyCodeLine{654    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (ppm);        \textcolor{comment}{/* XpixelsPerM (96 dpi = 3780 pixels/meter) */}}
\DoxyCodeLine{655    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (ppm);        \textcolor{comment}{/* YpixelsPerM (96 dpi = 3780 pixels/meter) */}}
\DoxyCodeLine{656    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (2);          \textcolor{comment}{/* ColorsUsed (= 2)                         */}}
\DoxyCodeLine{657    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (2);          \textcolor{comment}{/* ColorsImportant (= 2)                    */}}
\DoxyCodeLine{658    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (0x00000000); \textcolor{comment}{/* black (reserved, B, G, R)                */}}
\DoxyCodeLine{659    \mbox{\hyperlink{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}{output4}} (0x00FFFFFF); \textcolor{comment}{/* white (reserved, B, G, R)                */}}
\DoxyCodeLine{660 }
\DoxyCodeLine{661    \textcolor{comment}{/*}}
\DoxyCodeLine{662 \textcolor{comment}{      Create header row bits.}}
\DoxyCodeLine{663 \textcolor{comment}{   */}}
\DoxyCodeLine{664    snprintf (raw\_header, \mbox{\hyperlink{unifontpic_8c_af314b4eee945c2791f7890f72f0623af}{HDR\_LEN}}, \textcolor{stringliteral}{"{}\%s Plane \%d"{}}, \mbox{\hyperlink{unifontpic_8h_a418ed439fafbc678a74cb266ef2919d4}{HEADER\_STRING}}, plane);}
\DoxyCodeLine{665    memset ((\textcolor{keywordtype}{void} *)header, 0, 256 * 16 * \textcolor{keyword}{sizeof} (\textcolor{keywordtype}{int})); \textcolor{comment}{/* fill with white */}}
\DoxyCodeLine{666    memset ((\textcolor{keywordtype}{void} *)header\_string, \textcolor{charliteral}{' '}, 256 * \textcolor{keyword}{sizeof} (\textcolor{keywordtype}{char})); \textcolor{comment}{/* 256 spaces */}}
\DoxyCodeLine{667    header\_string[256] = \textcolor{charliteral}{'\(\backslash\)0'};  \textcolor{comment}{/* null-\/terminated */}}
\DoxyCodeLine{668 }
\DoxyCodeLine{669    hdrlen = strlen (raw\_header);}
\DoxyCodeLine{670    \textcolor{comment}{/* Wide bitmap can print 256 columns, but limit to 32 columns for long bitmap. */}}
\DoxyCodeLine{671    \textcolor{keywordflow}{if} (hdrlen > 32) hdrlen = 32;}
\DoxyCodeLine{672    startcol = 127 -\/ ((hdrlen -\/ 1) >> 1);  \textcolor{comment}{/* to center header */}}
\DoxyCodeLine{673    \textcolor{comment}{/* center up to 32 chars */}}
\DoxyCodeLine{674    memcpy (\&header\_string[startcol], raw\_header, hdrlen);}
\DoxyCodeLine{675 }
\DoxyCodeLine{676    \textcolor{comment}{/* Copy each letter's bitmap from the plane\_array[][] we constructed. */}}
\DoxyCodeLine{677    \textcolor{keywordflow}{for} (j = 0; j < 256; j++) \{}
\DoxyCodeLine{678       \textcolor{keywordflow}{for} (i = 0; i < 16; i++) \{}
\DoxyCodeLine{679          header[i][j] = \mbox{\hyperlink{unifontpic_8h_a593ebc374e9f30c90743f0fd48cc91df}{ascii\_bits}}[header\_string[j] \& 0x7F][i];}
\DoxyCodeLine{680       \}}
\DoxyCodeLine{681    \}}
\DoxyCodeLine{682 }
\DoxyCodeLine{683    \textcolor{comment}{/*}}
\DoxyCodeLine{684 \textcolor{comment}{      Create the left column legend.}}
\DoxyCodeLine{685 \textcolor{comment}{   */}}
\DoxyCodeLine{686    memset ((\textcolor{keywordtype}{void} *)leftcol, 0, 256 * 16 * \textcolor{keyword}{sizeof} (\textcolor{keywordtype}{unsigned}));}
\DoxyCodeLine{687 }
\DoxyCodeLine{688    \textcolor{keywordflow}{for} (codept = 0x0000; codept < 0x10000; codept += 0x100) \{}
\DoxyCodeLine{689       d1 = (codept >> 12) \& 0xF; \textcolor{comment}{/* most significant hex digit */}}
\DoxyCodeLine{690       d2 = (codept >>  8) \& 0xF;}
\DoxyCodeLine{691 }
\DoxyCodeLine{692       thisrow = codept >> 8; \textcolor{comment}{/* rows of 256 glyphs */}}
\DoxyCodeLine{693 }
\DoxyCodeLine{694       \textcolor{comment}{/* fill in first and second digits */}}
\DoxyCodeLine{695 }
\DoxyCodeLine{696       \textcolor{keywordflow}{if} (tinynum) \{ \textcolor{comment}{/* use 4x5 pixel glyphs */}}
\DoxyCodeLine{697          \textcolor{keywordflow}{for} (digitrow = 0; digitrow < 5; digitrow++) \{}
\DoxyCodeLine{698             leftcol[thisrow][6 + digitrow] =}
\DoxyCodeLine{699                (\mbox{\hyperlink{unibmp2hex_8c_a8e50648544568f9274781c2c90acdd78}{hexdigit}}[d1][digitrow] << 10) |}
\DoxyCodeLine{700                (\mbox{\hyperlink{unibmp2hex_8c_a8e50648544568f9274781c2c90acdd78}{hexdigit}}[d2][digitrow] <<  4);}
\DoxyCodeLine{701          \}}
\DoxyCodeLine{702       \}}
\DoxyCodeLine{703       \textcolor{keywordflow}{else} \{ \textcolor{comment}{/* bigger numbers -\/-\/ use glyphs from Unifont itself */}}
\DoxyCodeLine{704          \textcolor{comment}{/* convert hexadecimal digits to ASCII equivalent */}}
\DoxyCodeLine{705          hexalpha1 = d1 < 0xA ? \textcolor{charliteral}{'0'} + d1 : \textcolor{charliteral}{'A'} + d1 -\/ 0xA;}
\DoxyCodeLine{706          hexalpha2 = d2 < 0xA ? \textcolor{charliteral}{'0'} + d2 : \textcolor{charliteral}{'A'} + d2 -\/ 0xA;}
\DoxyCodeLine{707 }
\DoxyCodeLine{708          \textcolor{keywordflow}{for} (i = 0 ; i < 16; i++) \{}
\DoxyCodeLine{709             leftcol[thisrow][i] =}
\DoxyCodeLine{710                (\mbox{\hyperlink{unifontpic_8h_a593ebc374e9f30c90743f0fd48cc91df}{ascii\_bits}}[hexalpha1][i] << 2) |}
\DoxyCodeLine{711                (\mbox{\hyperlink{unifontpic_8h_a593ebc374e9f30c90743f0fd48cc91df}{ascii\_bits}}[hexalpha2][i] >> 6);}
\DoxyCodeLine{712          \}}
\DoxyCodeLine{713       \}}
\DoxyCodeLine{714 }
\DoxyCodeLine{715       \textcolor{keywordflow}{for} (i = 0; i < 15; i ++) \{}
\DoxyCodeLine{716          leftcol[thisrow][i] |= 0x00000002;      \textcolor{comment}{/* right border */}}
\DoxyCodeLine{717       \}}
\DoxyCodeLine{718 }
\DoxyCodeLine{719       leftcol[thisrow][15] = 0x0000FFFE;        \textcolor{comment}{/* bottom border */}}
\DoxyCodeLine{720 }
\DoxyCodeLine{721       \textcolor{keywordflow}{if} (d2 == 0xF) \{                     \textcolor{comment}{/* 4096-\/point boundary */}}
\DoxyCodeLine{722          leftcol[thisrow][15] |= 0x00FF0000;  \textcolor{comment}{/* longer tic mark */}}
\DoxyCodeLine{723       \}}
\DoxyCodeLine{724 }
\DoxyCodeLine{725       \textcolor{keywordflow}{if} ((thisrow \% 0x40) == 0x3F) \{    \textcolor{comment}{/* 16,384-\/point boundary */}}
\DoxyCodeLine{726          leftcol[thisrow][15] |= 0xFFFF0000; \textcolor{comment}{/* longest tic mark */}}
\DoxyCodeLine{727       \}}
\DoxyCodeLine{728    \}}
\DoxyCodeLine{729 }
\DoxyCodeLine{730    \textcolor{comment}{/*}}
\DoxyCodeLine{731 \textcolor{comment}{      Create the top row legend.}}
\DoxyCodeLine{732 \textcolor{comment}{   */}}
\DoxyCodeLine{733    memset ((\textcolor{keywordtype}{void} *)toprow, 0, 32 * 256 * \textcolor{keyword}{sizeof} (\textcolor{keywordtype}{unsigned}));}
\DoxyCodeLine{734 }
\DoxyCodeLine{735    \textcolor{keywordflow}{for} (codept = 0x00; codept <= 0xFF; codept++) \{}
\DoxyCodeLine{736       d3 = (codept >>  4) \& 0xF;}
\DoxyCodeLine{737       d4 =  codept        \& 0xF; \textcolor{comment}{/* least significant hex digit */}}
\DoxyCodeLine{738 }
\DoxyCodeLine{739       \textcolor{keywordflow}{if} (tinynum) \{}
\DoxyCodeLine{740          \textcolor{keywordflow}{for} (digitrow = 0; digitrow < 5; digitrow++) \{}
\DoxyCodeLine{741             toprow[16 + 6 + digitrow][codept] =}
\DoxyCodeLine{742                (\mbox{\hyperlink{unibmp2hex_8c_a8e50648544568f9274781c2c90acdd78}{hexdigit}}[d3][digitrow] << 10) |}
\DoxyCodeLine{743                (\mbox{\hyperlink{unibmp2hex_8c_a8e50648544568f9274781c2c90acdd78}{hexdigit}}[d4][digitrow] <<  4);}
\DoxyCodeLine{744          \}}
\DoxyCodeLine{745       \}}
\DoxyCodeLine{746       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{747          \textcolor{comment}{/* convert hexadecimal digits to ASCII equivalent */}}
\DoxyCodeLine{748          hexalpha1 = d3 < 0xA ? \textcolor{charliteral}{'0'} + d3 : \textcolor{charliteral}{'A'} + d3 -\/ 0xA;}
\DoxyCodeLine{749          hexalpha2 = d4 < 0xA ? \textcolor{charliteral}{'0'} + d4 : \textcolor{charliteral}{'A'} + d4 -\/ 0xA;}
\DoxyCodeLine{750          \textcolor{keywordflow}{for} (i = 0 ; i < 16; i++) \{}
\DoxyCodeLine{751             toprow[14 + i][codept] =}
\DoxyCodeLine{752                (\mbox{\hyperlink{unifontpic_8h_a593ebc374e9f30c90743f0fd48cc91df}{ascii\_bits}}[hexalpha1][i]     ) |}
\DoxyCodeLine{753                (\mbox{\hyperlink{unifontpic_8h_a593ebc374e9f30c90743f0fd48cc91df}{ascii\_bits}}[hexalpha2][i] >> 7);}
\DoxyCodeLine{754          \}}
\DoxyCodeLine{755       \}}
\DoxyCodeLine{756    \}}
\DoxyCodeLine{757 }
\DoxyCodeLine{758    \textcolor{keywordflow}{for} (j = 0; j < 256; j++) \{}
\DoxyCodeLine{759       \textcolor{comment}{/* force bottom pixel row to be white, for separation from glyphs */}}
\DoxyCodeLine{760       toprow[16 + 15][j] = 0x0000;}
\DoxyCodeLine{761    \}}
\DoxyCodeLine{762 }
\DoxyCodeLine{763    \textcolor{comment}{/* 1 pixel row with left-\/hand legend line */}}
\DoxyCodeLine{764    \textcolor{keywordflow}{for} (j = 0; j < 256; j++) \{}
\DoxyCodeLine{765       toprow[16 + 14][j] |= 0xFFFF;}
\DoxyCodeLine{766    \}}
\DoxyCodeLine{767 }
\DoxyCodeLine{768    \textcolor{comment}{/* 14 rows with line on left to fill out this character row */}}
\DoxyCodeLine{769    \textcolor{keywordflow}{for} (i = 13; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{770       \textcolor{keywordflow}{for} (j = 0; j < 256; j++) \{}
\DoxyCodeLine{771          toprow[16 + i][j] |= 0x0001;}
\DoxyCodeLine{772       \}}
\DoxyCodeLine{773    \}}
\DoxyCodeLine{774 }
\DoxyCodeLine{775    \textcolor{comment}{/* Form the longer tic marks in top legend */}}
\DoxyCodeLine{776    \textcolor{keywordflow}{for} (i = 8; i < 16; i++) \{}
\DoxyCodeLine{777       \textcolor{keywordflow}{for} (j = 0x0F; j < 0x100; j += 0x10) \{}
\DoxyCodeLine{778          toprow[i][j] |= 0x0001;}
\DoxyCodeLine{779       \}}
\DoxyCodeLine{780    \}}
\DoxyCodeLine{781 }
\DoxyCodeLine{782    \textcolor{comment}{/*}}
\DoxyCodeLine{783 \textcolor{comment}{      Now write the raster image.}}
\DoxyCodeLine{784 \textcolor{comment}{}}
\DoxyCodeLine{785 \textcolor{comment}{      XOR each byte with 0xFF because black = 0, white = 1 in BMP.}}
\DoxyCodeLine{786 \textcolor{comment}{   */}}
\DoxyCodeLine{787 }
\DoxyCodeLine{788    \textcolor{comment}{/* Write the glyphs, bottom-\/up, left-\/to-\/right, in rows of 16 (i.e., 0x10) */}}
\DoxyCodeLine{789    \textcolor{keywordflow}{for} (i = 0xFF00; i >= 0; i -\/= 0x100) \{}
\DoxyCodeLine{790       thisrow = i >> 8; \textcolor{comment}{/* 256 glyphs per row */}}
\DoxyCodeLine{791       \textcolor{keywordflow}{for} (j = 15; j >= 0; j-\/-\/) \{}
\DoxyCodeLine{792          \textcolor{comment}{/* left-\/hand legend */}}
\DoxyCodeLine{793          putchar ((\string~leftcol[thisrow][j] >> 24) \& 0xFF);}
\DoxyCodeLine{794          putchar ((\string~leftcol[thisrow][j] >> 16) \& 0xFF);}
\DoxyCodeLine{795          putchar ((\string~leftcol[thisrow][j] >>  8) \& 0xFF);}
\DoxyCodeLine{796          putchar ( \string~leftcol[thisrow][j]        \& 0xFF);}
\DoxyCodeLine{797          \textcolor{comment}{/* Unifont glyph */}}
\DoxyCodeLine{798          \textcolor{keywordflow}{for} (k = 0x00; k < 0x100; k++) \{}
\DoxyCodeLine{799             bytesout = \string~plane\_array[i+k][j] \& 0xFFFF;}
\DoxyCodeLine{800             putchar ((bytesout >> 8) \& 0xFF);}
\DoxyCodeLine{801             putchar ( bytesout       \& 0xFF);}
\DoxyCodeLine{802          \}}
\DoxyCodeLine{803       \}}
\DoxyCodeLine{804    \}}
\DoxyCodeLine{805 }
\DoxyCodeLine{806    \textcolor{comment}{/*}}
\DoxyCodeLine{807 \textcolor{comment}{      Write the top legend.}}
\DoxyCodeLine{808 \textcolor{comment}{   */}}
\DoxyCodeLine{809    \textcolor{comment}{/* i == 15: bottom pixel row of header is output here */}}
\DoxyCodeLine{810    \textcolor{comment}{/* left-\/hand legend: solid black line except for right-\/most pixel */}}
\DoxyCodeLine{811    putchar (0x00);}
\DoxyCodeLine{812    putchar (0x00);}
\DoxyCodeLine{813    putchar (0x00);}
\DoxyCodeLine{814    putchar (0x01);}
\DoxyCodeLine{815    \textcolor{keywordflow}{for} (j = 0; j < 256; j++) \{}
\DoxyCodeLine{816       putchar ((\string~toprow[16 + 15][j] >> 8) \& 0xFF);}
\DoxyCodeLine{817       putchar ( \string~toprow[16 + 15][j]       \& 0xFF);}
\DoxyCodeLine{818    \}}
\DoxyCodeLine{819 }
\DoxyCodeLine{820    putchar (0xFF);}
\DoxyCodeLine{821    putchar (0xFF);}
\DoxyCodeLine{822    putchar (0xFF);}
\DoxyCodeLine{823    putchar (0xFC);}
\DoxyCodeLine{824    \textcolor{keywordflow}{for} (j = 0; j < 256; j++) \{}
\DoxyCodeLine{825       putchar ((\string~toprow[16 + 14][j] >> 8) \& 0xFF);}
\DoxyCodeLine{826       putchar ( \string~toprow[16 + 14][j]       \& 0xFF);}
\DoxyCodeLine{827    \}}
\DoxyCodeLine{828 }
\DoxyCodeLine{829    \textcolor{keywordflow}{for} (i = 16 + 13; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{830       \textcolor{keywordflow}{if} (i >= 8) \{ \textcolor{comment}{/* make vertical stroke on right */}}
\DoxyCodeLine{831          putchar (0xFF);}
\DoxyCodeLine{832          putchar (0xFF);}
\DoxyCodeLine{833          putchar (0xFF);}
\DoxyCodeLine{834          putchar (0xFD);}
\DoxyCodeLine{835       \}}
\DoxyCodeLine{836       \textcolor{keywordflow}{else} \{ \textcolor{comment}{/* all white */}}
\DoxyCodeLine{837          putchar (0xFF);}
\DoxyCodeLine{838          putchar (0xFF);}
\DoxyCodeLine{839          putchar (0xFF);}
\DoxyCodeLine{840          putchar (0xFF);}
\DoxyCodeLine{841       \}}
\DoxyCodeLine{842       \textcolor{keywordflow}{for} (j = 0; j < 256; j++) \{}
\DoxyCodeLine{843          putchar ((\string~toprow[i][j] >> 8) \& 0xFF);}
\DoxyCodeLine{844          putchar ( \string~toprow[i][j]       \& 0xFF);}
\DoxyCodeLine{845       \}}
\DoxyCodeLine{846    \}}
\DoxyCodeLine{847 }
\DoxyCodeLine{848    \textcolor{comment}{/*}}
\DoxyCodeLine{849 \textcolor{comment}{      Write the header.}}
\DoxyCodeLine{850 \textcolor{comment}{   */}}
\DoxyCodeLine{851 }
\DoxyCodeLine{852    \textcolor{comment}{/* 8 completely white rows */}}
\DoxyCodeLine{853    \textcolor{keywordflow}{for} (i = 7; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{854       \textcolor{keywordflow}{for} (j = 0; j < 258; j++) \{}
\DoxyCodeLine{855          putchar (0xFF);}
\DoxyCodeLine{856          putchar (0xFF);}
\DoxyCodeLine{857       \}}
\DoxyCodeLine{858    \}}
\DoxyCodeLine{859 }
\DoxyCodeLine{860    \textcolor{keywordflow}{for} (i = 15; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{861       \textcolor{comment}{/* left-\/hand legend */}}
\DoxyCodeLine{862       putchar (0xFF);}
\DoxyCodeLine{863       putchar (0xFF);}
\DoxyCodeLine{864       putchar (0xFF);}
\DoxyCodeLine{865       putchar (0xFF);}
\DoxyCodeLine{866       \textcolor{comment}{/* header glyph */}}
\DoxyCodeLine{867       \textcolor{keywordflow}{for} (j = 0; j < 256; j++) \{}
\DoxyCodeLine{868          bytesout = \string~header[i][j] \& 0xFFFF;}
\DoxyCodeLine{869          putchar ((bytesout >> 8) \& 0xFF);}
\DoxyCodeLine{870          putchar ( bytesout       \& 0xFF);}
\DoxyCodeLine{871       \}}
\DoxyCodeLine{872    \}}
\DoxyCodeLine{873 }
\DoxyCodeLine{874    \textcolor{comment}{/* 8 completely white rows at very top */}}
\DoxyCodeLine{875    \textcolor{keywordflow}{for} (i = 7; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{876       \textcolor{keywordflow}{for} (j = 0; j < 258; j++) \{}
\DoxyCodeLine{877       putchar (0xFF);}
\DoxyCodeLine{878       putchar (0xFF);}
\DoxyCodeLine{879       \}}
\DoxyCodeLine{880    \}}
\DoxyCodeLine{881 }
\DoxyCodeLine{882    \textcolor{keywordflow}{return};}
\DoxyCodeLine{883 \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=236pt]{unifontpic_8c_a3931c7b44c00ffdb8925a3c837577677_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=225pt]{unifontpic_8c_a3931c7b44c00ffdb8925a3c837577677_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{unifontpic_8c_a0a030f2857f0d855b7ab0ccd8e968f1f}\label{unifontpic_8c_a0a030f2857f0d855b7ab0ccd8e968f1f}} 
\index{unifontpic.c@{unifontpic.c}!gethex@{gethex}}
\index{gethex@{gethex}!unifontpic.c@{unifontpic.c}}
\doxysubsubsection{\texorpdfstring{gethex()}{gethex()}}
{\footnotesize\ttfamily void gethex (\begin{DoxyParamCaption}\item[{char $\ast$}]{instring,  }\item[{int}]{plane\+\_\+array\mbox{[}0x10000\mbox{]}\mbox{[}16\mbox{]},  }\item[{int}]{plane }\end{DoxyParamCaption})}



Read a Unifont .hex-\/format input file from stdin. 

Each glyph can be 2, 4, 6, or 8 ASCII hexadecimal digits wide. \mbox{\hyperlink{structGlyph}{Glyph}} height is fixed at 16 pixels.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em instring} & One line from a Unifont .hex-\/format file. \\
\hline
\mbox{\texttt{ in,out}}  & {\em plane\+\_\+array} & Bitmap for this plane, one bitmap row per element. \\
\hline
\mbox{\texttt{ in}}  & {\em plane} & The Unicode plane, 0..17. \\
\hline
\end{DoxyParams}


Definition at line 215 of file unifontpic.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{216 \{}
\DoxyCodeLine{217    \textcolor{keywordtype}{char} *bitstring;  \textcolor{comment}{/* pointer into instring for glyph bitmap */}}
\DoxyCodeLine{218    \textcolor{keywordtype}{int} i;       \textcolor{comment}{/* loop variable                               */}}
\DoxyCodeLine{219    \textcolor{keywordtype}{int} codept;  \textcolor{comment}{/* the Unicode code point of the current glyph */}}
\DoxyCodeLine{220    \textcolor{keywordtype}{int} glyph\_plane; \textcolor{comment}{/* Unicode plane of current glyph          */}}
\DoxyCodeLine{221    \textcolor{keywordtype}{int} ndigits; \textcolor{comment}{/* number of ASCII hexadecimal digits in glyph */}}
\DoxyCodeLine{222    \textcolor{keywordtype}{int} bytespl; \textcolor{comment}{/* bytes per line of pixels in a glyph         */}}
\DoxyCodeLine{223    \textcolor{keywordtype}{int} temprow; \textcolor{comment}{/* 1 row of a quadruple-\/width glyph            */}}
\DoxyCodeLine{224    \textcolor{keywordtype}{int} newrow;  \textcolor{comment}{/* 1 row of double-\/width output pixels         */}}
\DoxyCodeLine{225    \textcolor{keywordtype}{unsigned} bitmask; \textcolor{comment}{/* to mask off 2 bits of long width glyph */}}
\DoxyCodeLine{226 }
\DoxyCodeLine{227    \textcolor{comment}{/*}}
\DoxyCodeLine{228 \textcolor{comment}{      Read each input line and place its glyph into the bit array.}}
\DoxyCodeLine{229 \textcolor{comment}{   */}}
\DoxyCodeLine{230    sscanf (instring, \textcolor{stringliteral}{"{}\%X"{}}, \&codept);}
\DoxyCodeLine{231    glyph\_plane = codept >> 16;}
\DoxyCodeLine{232    \textcolor{keywordflow}{if} (glyph\_plane == plane) \{}
\DoxyCodeLine{233       codept \&= 0xFFFF;  \textcolor{comment}{/* array index will only have 16 bit address */}}
\DoxyCodeLine{234       \textcolor{comment}{/* find the colon separator */}}
\DoxyCodeLine{235       \textcolor{keywordflow}{for} (i = 0; (i < 9) \&\& (instring[i] != \textcolor{charliteral}{':'}); i++);}
\DoxyCodeLine{236       i++; \textcolor{comment}{/* position past it */}}
\DoxyCodeLine{237       bitstring = \&instring[i];}
\DoxyCodeLine{238       ndigits = strlen (bitstring);}
\DoxyCodeLine{239       \textcolor{comment}{/* don't count '\(\backslash\)n' at end of line if present */}}
\DoxyCodeLine{240       \textcolor{keywordflow}{if} (bitstring[ndigits -\/ 1] == \textcolor{charliteral}{'\(\backslash\)n'}) ndigits-\/-\/;}
\DoxyCodeLine{241       bytespl = ndigits >> 5;  \textcolor{comment}{/* 16 rows per line, 2 digits per byte */}}
\DoxyCodeLine{242 }
\DoxyCodeLine{243       \textcolor{keywordflow}{if} (bytespl >= 1 \&\& bytespl <= 4) \{}
\DoxyCodeLine{244          \textcolor{keywordflow}{for} (i = 0; i < 16; i++) \{ \textcolor{comment}{/* 16 rows per glyph */}}
\DoxyCodeLine{245             \textcolor{comment}{/* Read correct number of hexadecimal digits given glyph width */}}
\DoxyCodeLine{246             \textcolor{keywordflow}{switch} (bytespl) \{}
\DoxyCodeLine{247                \textcolor{keywordflow}{case} 1: sscanf (bitstring, \textcolor{stringliteral}{"{}\%2X"{}}, \&temprow);}
\DoxyCodeLine{248                        bitstring += 2;}
\DoxyCodeLine{249                        temprow <<= 8; \textcolor{comment}{/* left-\/justify single-\/width glyph */}}
\DoxyCodeLine{250                        \textcolor{keywordflow}{break};}
\DoxyCodeLine{251                \textcolor{keywordflow}{case} 2: sscanf (bitstring, \textcolor{stringliteral}{"{}\%4X"{}}, \&temprow);}
\DoxyCodeLine{252                        bitstring += 4;}
\DoxyCodeLine{253                        \textcolor{keywordflow}{break};}
\DoxyCodeLine{254                \textcolor{comment}{/* cases 3 and 4 widths will be compressed by 50\% (see below) */}}
\DoxyCodeLine{255                \textcolor{keywordflow}{case} 3: sscanf (bitstring, \textcolor{stringliteral}{"{}\%6X"{}}, \&temprow);}
\DoxyCodeLine{256                        bitstring += 6;}
\DoxyCodeLine{257                        temprow <<= 8; \textcolor{comment}{/* left-\/justify */}}
\DoxyCodeLine{258                        \textcolor{keywordflow}{break};}
\DoxyCodeLine{259                \textcolor{keywordflow}{case} 4: sscanf (bitstring, \textcolor{stringliteral}{"{}\%8X"{}}, \&temprow);}
\DoxyCodeLine{260                        bitstring += 8;}
\DoxyCodeLine{261                        \textcolor{keywordflow}{break};}
\DoxyCodeLine{262             \}  \textcolor{comment}{/* switch on number of bytes per row */}}
\DoxyCodeLine{263             \textcolor{comment}{/* compress glyph width by 50\% if greater than double-\/width */}}
\DoxyCodeLine{264             \textcolor{keywordflow}{if} (bytespl > 2) \{}
\DoxyCodeLine{265                newrow = 0x0000;}
\DoxyCodeLine{266                \textcolor{comment}{/* mask off 2 bits at a time to convert each pair to 1 bit out */}}
\DoxyCodeLine{267                \textcolor{keywordflow}{for} (bitmask = 0xC0000000; bitmask != 0; bitmask >>= 2) \{}
\DoxyCodeLine{268                   newrow <<= 1;}
\DoxyCodeLine{269                   \textcolor{keywordflow}{if} ((temprow \& bitmask) != 0) newrow |= 1;}
\DoxyCodeLine{270                \}}
\DoxyCodeLine{271                temprow = newrow;}
\DoxyCodeLine{272             \}  \textcolor{comment}{/* done conditioning glyphs beyond double-\/width */}}
\DoxyCodeLine{273             plane\_array[codept][i] = temprow;  \textcolor{comment}{/* store glyph bitmap for output */}}
\DoxyCodeLine{274          \}  \textcolor{comment}{/* for each row */}}
\DoxyCodeLine{275       \}  \textcolor{comment}{/* if 1 to 4 bytes per row/line */}}
\DoxyCodeLine{276    \}  \textcolor{comment}{/* if this is the plane we are seeking */}}
\DoxyCodeLine{277 }
\DoxyCodeLine{278    \textcolor{keywordflow}{return};}
\DoxyCodeLine{279 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=200pt]{unifontpic_8c_a0a030f2857f0d855b7ab0ccd8e968f1f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{unifontpic_8c_a3c04138a5bfe5d72780bb7e82a18e627}\label{unifontpic_8c_a3c04138a5bfe5d72780bb7e82a18e627}} 
\index{unifontpic.c@{unifontpic.c}!main@{main}}
\index{main@{main}!unifontpic.c@{unifontpic.c}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}



The main function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em argc} & The count of command line arguments. \\
\hline
\mbox{\texttt{ in}}  & {\em argv} & Pointer to array of command line arguments. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
This program exits with status EXIT\+\_\+\+SUCCESS. 
\end{DoxyReturn}


Definition at line 87 of file unifontpic.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{88 \{}
\DoxyCodeLine{89    \textcolor{comment}{/* Input line buffer */}}
\DoxyCodeLine{90    \textcolor{keywordtype}{char} instring[\mbox{\hyperlink{unifont1per_8c_a2ff420a6c6a2d1effc47a81e37327985}{MAXSTRING}}];}
\DoxyCodeLine{91 }
\DoxyCodeLine{92    \textcolor{comment}{/* long and dpi are set from command-\/line options */}}
\DoxyCodeLine{93    \textcolor{keywordtype}{int} wide=1; \textcolor{comment}{/* =1 for a 256x256 grid, =0 for a 16x4096 grid */}}
\DoxyCodeLine{94    \textcolor{keywordtype}{int} dpi=96; \textcolor{comment}{/* change for 256x256 grid to fit paper if desired */}}
\DoxyCodeLine{95    \textcolor{keywordtype}{int} tinynum=0; \textcolor{comment}{/* whether to use tiny labels for 256x256 grid */}}
\DoxyCodeLine{96 }
\DoxyCodeLine{97    \textcolor{keywordtype}{int} i, j; \textcolor{comment}{/* loop variables */}}
\DoxyCodeLine{98 }
\DoxyCodeLine{99    \textcolor{keywordtype}{int} plane=0;      \textcolor{comment}{/* Unicode plane, 0..17; Plane 0 is default */}}
\DoxyCodeLine{100    \textcolor{comment}{/* 16 pixel rows for each of 65,536 glyphs in a Unicode plane */}}
\DoxyCodeLine{101    \textcolor{keywordtype}{int} plane\_array[0x10000][16];}
\DoxyCodeLine{102 }
\DoxyCodeLine{103    \textcolor{keywordtype}{void} \mbox{\hyperlink{unifontpic_8c_a0a030f2857f0d855b7ab0ccd8e968f1f}{gethex}}();}
\DoxyCodeLine{104    \textcolor{keywordtype}{void} \mbox{\hyperlink{unifontpic_8c_afd429d88175c59dae5c32e8c9aa7851d}{genlongbmp}}();}
\DoxyCodeLine{105    \textcolor{keywordtype}{void} \mbox{\hyperlink{unifontpic_8c_a3931c7b44c00ffdb8925a3c837577677}{genwidebmp}}();}
\DoxyCodeLine{106 }
\DoxyCodeLine{107    \textcolor{keywordflow}{if} (argc > 1) \{}
\DoxyCodeLine{108       \textcolor{keywordflow}{for} (i = 1; i < argc; i++) \{}
\DoxyCodeLine{109          \textcolor{keywordflow}{if} (strncmp (argv[i],\textcolor{stringliteral}{"{}-\/l"{}},2) == 0) \{ \textcolor{comment}{/* long display */}}
\DoxyCodeLine{110            wide = 0;}
\DoxyCodeLine{111          \}}
\DoxyCodeLine{112          \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (strncmp (argv[i],\textcolor{stringliteral}{"{}-\/d"{}},2) == 0) \{}
\DoxyCodeLine{113             dpi = atoi (\&argv[i][2]); \textcolor{comment}{/* dots/inch specified on command line */}}
\DoxyCodeLine{114          \}}
\DoxyCodeLine{115          \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (strncmp (argv[i],\textcolor{stringliteral}{"{}-\/t"{}},2) == 0) \{}
\DoxyCodeLine{116             tinynum = 1;}
\DoxyCodeLine{117          \}}
\DoxyCodeLine{118          \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (strncmp (argv[i],\textcolor{stringliteral}{"{}-\/P"{}},2) == 0) \{}
\DoxyCodeLine{119             \textcolor{comment}{/* Get Unicode plane */}}
\DoxyCodeLine{120             \textcolor{keywordflow}{for} (j = 2; argv[i][j] != \textcolor{charliteral}{'\(\backslash\)0'}; j++) \{}
\DoxyCodeLine{121                \textcolor{keywordflow}{if} (argv[i][j] < \textcolor{charliteral}{'0'} || argv[i][j] > \textcolor{charliteral}{'9'}) \{}
\DoxyCodeLine{122                   fprintf (stderr,}
\DoxyCodeLine{123                            \textcolor{stringliteral}{"{}ERROR: Specify Unicode plane as decimal number.\(\backslash\)n\(\backslash\)n"{}});}
\DoxyCodeLine{124                   exit (EXIT\_FAILURE);}
\DoxyCodeLine{125                \}}
\DoxyCodeLine{126             \}}
\DoxyCodeLine{127             plane = atoi (\&argv[i][2]); \textcolor{comment}{/* Unicode plane, 0..17 */}}
\DoxyCodeLine{128             \textcolor{keywordflow}{if} (plane < 0 || plane > 17) \{}
\DoxyCodeLine{129                fprintf (stderr,}
\DoxyCodeLine{130                         \textcolor{stringliteral}{"{}ERROR: Plane out of Unicode range [0,17].\(\backslash\)n\(\backslash\)n"{}});}
\DoxyCodeLine{131                exit (EXIT\_FAILURE);}
\DoxyCodeLine{132             \}}
\DoxyCodeLine{133          \}}
\DoxyCodeLine{134       \}}
\DoxyCodeLine{135    \}}
\DoxyCodeLine{136 }
\DoxyCodeLine{137 }
\DoxyCodeLine{138    \textcolor{comment}{/*}}
\DoxyCodeLine{139 \textcolor{comment}{      Initialize the ASCII bitmap array for chart titles}}
\DoxyCodeLine{140 \textcolor{comment}{   */}}
\DoxyCodeLine{141    \textcolor{keywordflow}{for} (i = 0; i < 128; i++) \{}
\DoxyCodeLine{142       \mbox{\hyperlink{unifontpic_8c_a0a030f2857f0d855b7ab0ccd8e968f1f}{gethex}} (\mbox{\hyperlink{unifontpic_8h_ad38c3dd5832ced1dc64c3093f359afcf}{ascii\_hex}}[i], plane\_array, 0); \textcolor{comment}{/* convert Unifont hexadecimal string to bitmap */}}
\DoxyCodeLine{143       \textcolor{keywordflow}{for} (j = 0; j < 16; j++) \mbox{\hyperlink{unifontpic_8h_a593ebc374e9f30c90743f0fd48cc91df}{ascii\_bits}}[i][j] = plane\_array[i][j];}
\DoxyCodeLine{144    \}}
\DoxyCodeLine{145 }
\DoxyCodeLine{146 }
\DoxyCodeLine{147    \textcolor{comment}{/*}}
\DoxyCodeLine{148 \textcolor{comment}{      Read in the Unifont hex file to render from standard input}}
\DoxyCodeLine{149 \textcolor{comment}{   */}}
\DoxyCodeLine{150    memset ((\textcolor{keywordtype}{void} *)plane\_array, 0, 0x10000 * 16 * \textcolor{keyword}{sizeof} (\textcolor{keywordtype}{int}));}
\DoxyCodeLine{151    \textcolor{keywordflow}{while} (fgets (instring, \mbox{\hyperlink{unifont1per_8c_a2ff420a6c6a2d1effc47a81e37327985}{MAXSTRING}}, stdin) != NULL) \{}
\DoxyCodeLine{152       \mbox{\hyperlink{unifontpic_8c_a0a030f2857f0d855b7ab0ccd8e968f1f}{gethex}} (instring, plane\_array, plane); \textcolor{comment}{/* read .hex input file and fill plane\_array with glyph data */}}
\DoxyCodeLine{153    \}  \textcolor{comment}{/* while not EOF */}}
\DoxyCodeLine{154 }
\DoxyCodeLine{155 }
\DoxyCodeLine{156    \textcolor{comment}{/*}}
\DoxyCodeLine{157 \textcolor{comment}{      Write plane\_array glyph data to BMP file as wide or long bitmap.}}
\DoxyCodeLine{158 \textcolor{comment}{   */}}
\DoxyCodeLine{159    \textcolor{keywordflow}{if} (wide) \{}
\DoxyCodeLine{160       \mbox{\hyperlink{unifontpic_8c_a3931c7b44c00ffdb8925a3c837577677}{genwidebmp}} (plane\_array, dpi, tinynum, plane);}
\DoxyCodeLine{161    \}}
\DoxyCodeLine{162    \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{163       \mbox{\hyperlink{unifontpic_8c_afd429d88175c59dae5c32e8c9aa7851d}{genlongbmp}} (plane\_array, dpi, tinynum, plane);}
\DoxyCodeLine{164    \}}
\DoxyCodeLine{165 }
\DoxyCodeLine{166    exit (EXIT\_SUCCESS);}
\DoxyCodeLine{167 \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=310pt]{unifontpic_8c_a3c04138a5bfe5d72780bb7e82a18e627_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{unifontpic_8c_af1fbb002e4787785de92e073ec46b787}\label{unifontpic_8c_af1fbb002e4787785de92e073ec46b787}} 
\index{unifontpic.c@{unifontpic.c}!output2@{output2}}
\index{output2@{output2}!unifontpic.c@{unifontpic.c}}
\doxysubsubsection{\texorpdfstring{output2()}{output2()}}
{\footnotesize\ttfamily void output2 (\begin{DoxyParamCaption}\item[{int}]{thisword }\end{DoxyParamCaption})}



Output a 2-\/byte integer in little-\/endian order. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em thisword} & The 2-\/byte integer to output as binary data. \\
\hline
\end{DoxyParams}


Definition at line 194 of file unifontpic.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{195 \{}
\DoxyCodeLine{196 }
\DoxyCodeLine{197    putchar ( thisword       \& 0xFF);}
\DoxyCodeLine{198    putchar ((thisword >> 8) \& 0xFF);}
\DoxyCodeLine{199 }
\DoxyCodeLine{200    \textcolor{keywordflow}{return};}
\DoxyCodeLine{201 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=310pt]{unifontpic_8c_af1fbb002e4787785de92e073ec46b787_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}\label{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710}} 
\index{unifontpic.c@{unifontpic.c}!output4@{output4}}
\index{output4@{output4}!unifontpic.c@{unifontpic.c}}
\doxysubsubsection{\texorpdfstring{output4()}{output4()}}
{\footnotesize\ttfamily void output4 (\begin{DoxyParamCaption}\item[{int}]{thisword }\end{DoxyParamCaption})}



Output a 4-\/byte integer in little-\/endian order. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em thisword} & The 4-\/byte integer to output as binary data. \\
\hline
\end{DoxyParams}


Definition at line 176 of file unifontpic.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{177 \{}
\DoxyCodeLine{178 }
\DoxyCodeLine{179    putchar ( thisword        \& 0xFF);}
\DoxyCodeLine{180    putchar ((thisword >>  8) \& 0xFF);}
\DoxyCodeLine{181    putchar ((thisword >> 16) \& 0xFF);}
\DoxyCodeLine{182    putchar ((thisword >> 24) \& 0xFF);}
\DoxyCodeLine{183 }
\DoxyCodeLine{184    \textcolor{keywordflow}{return};}
\DoxyCodeLine{185 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=310pt]{unifontpic_8c_ac186155c351c9c3fb9c43acffcbab710_icgraph}
\end{center}
\end{figure}
